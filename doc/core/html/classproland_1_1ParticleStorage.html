<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>proland: proland::ParticleStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>proland</b>::<a class="el" href="classproland_1_1ParticleStorage.html">ParticleStorage</a>
  </div>
</div>
<div class="contents">
<h1>proland::ParticleStorage Class Reference<br/>
<small>
[<a class="el" href="group__particles.html">particles</a>]</small>
</h1><!-- doxytag: class="proland::ParticleStorage" -->
<p>A storage to store particles.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ParticleStorage.h&gt;</code></p>

<p><a href="classproland_1_1ParticleStorage-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An abstract particle stored by a <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>.  <a href="classproland_1_1ParticleStorage_1_1Particle.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a9fbb72a6059e83c21ec70eb0057a814f">ParticleStorage</a> (int <a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9">capacity</a>, bool <a class="el" href="classproland_1_1ParticleStorage.html#a897f3df3ed1f26f1b7a13e9a8378e178">pack</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>.  <a href="#a9fbb72a6059e83c21ec70eb0057a814f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a5349b2392ee0ecaeaf3b29fccea58609">~ParticleStorage</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes this <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>.  <a href="#a5349b2392ee0ecaeaf3b29fccea58609"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#aff8c856a12eb8d0c4bdf8aad3fd74857">initCpuStorage</a> (int <a class="el" href="classproland_1_1ParticleStorage.html#aad2cf9f9cce458adabb8034bfef79dc6">particleSize</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the CPU storage for the particles.  <a href="#aff8c856a12eb8d0c4bdf8aad3fd74857"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#adf7625fbcfd7ff85f4cded5ee454be59">initGpuStorage</a> (const string &amp;name, TextureInternalFormat f, int components)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a GPU storage for the particles.  <a href="#adf7625fbcfd7ff85f4cded5ee454be59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a7a35744870b0db892d27198578b76060">getCapacity</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the maximum number of particles that can be stored in this storage.  <a href="#a7a35744870b0db892d27198578b76060"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; TextureBuffer &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#abede53cb5e75f34770a7246504c9dada">getGpuStorage</a> (const string &amp;name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a texture buffer containing particles data on GPU.  <a href="#abede53cb5e75f34770a7246504c9dada"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a2072e272ca840f53f4dcddd1827a90ed">getParticlesCount</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current number of particles stored in this storage.  <a href="#a2072e272ca840f53f4dcddd1827a90ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> * &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#ad7a5fe5966339c33185743e8111fb70d">getParticles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns an iterator to the first particle currently stored in this storage.  <a href="#ad7a5fe5966339c33185743e8111fb70d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> * &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a32d85ba1baa13cf0698dd51096031d25">end</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns an iterator just past the last stored particle.  <a href="#a32d85ba1baa13cf0698dd51096031d25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#afe1af2e325715fb799236ddfc927bfa1">getParticleIndex</a> (<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the index of the given particle.  <a href="#afe1af2e325715fb799236ddfc927bfa1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#af738ec19ac74f2bb1d35ed49275eb317">newParticle</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a new uninitialized particle.  <a href="#af738ec19ac74f2bb1d35ed49275eb317"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a5b6c113dba81b5e5d449406884883133">deleteParticle</a> (<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes the given particle.  <a href="#a5b6c113dba81b5e5d449406884883133"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a2efe1d5ea5c1084d9776db3fb1015b74">clear</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes the entire list of particles.  <a href="#a2efe1d5ea5c1084d9776db3fb1015b74"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#ad2f77f12733477e9e3852f33d29a6a8b">ParticleStorage</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new uninitialized <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>.  <a href="#ad2f77f12733477e9e3852f33d29a6a8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#acee69c9378133c71c70e3fc43c2c2dd5">init</a> (int <a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9">capacity</a>, bool <a class="el" href="classproland_1_1ParticleStorage.html#a897f3df3ed1f26f1b7a13e9a8378e178">pack</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes this <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>.  <a href="#acee69c9378133c71c70e3fc43c2c2dd5"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#aad2cf9f9cce458adabb8034bfef79dc6">particleSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size in bytes, on CPU, of each particle.  <a href="#aad2cf9f9cce458adabb8034bfef79dc6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9">capacity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum number of particles that can be stored in this storage.  <a href="#a760d70b0b8eaa1ade2f1c766c93f54f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a716501da749ceece524fda79e5a794f6">available</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of available slots in <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562" title="The particles data on CPU.">particles</a> to store new particles.  <a href="#a716501da749ceece524fda79e5a794f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562">particles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The particles data on CPU.  <a href="#a745a08c3bc139c75a78bab3fa1cbe562"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">map&lt; string, ptr&lt; TextureBuffer &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#aad98f8d5d969bf8d5a7e6a27098ce921">gpuTextures</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The particles data on GPU, in the form of texture buffers.  <a href="#aad98f8d5d969bf8d5a7e6a27098ce921"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#adbb8fa6edf998ba2f0f1db1dd4cfc211">freeAndAllocatedParticles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointers to the free and allocated particles in <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562" title="The particles data on CPU.">particles</a>.  <a href="#adbb8fa6edf998ba2f0f1db1dd4cfc211"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleStorage.html#a897f3df3ed1f26f1b7a13e9a8378e178">pack</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True to ensure that new particles are always created with the minimum available index.  <a href="#a897f3df3ed1f26f1b7a13e9a8378e178"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A storage to store particles. </p>
<p>This class provides both generic CPU and GPU storages for particles, and provides generic methods to keep track of the currently allocated particles in this storage, and to keep track of the free slots that can be used to allocate new particles.</p>
<dl class="author"><dt><b>Authors:</b></dt><dd>Eric Bruneton, Antoine Begault, Guillaume Piolat </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9fbb72a6059e83c21ec70eb0057a814f"></a><!-- doxytag: member="proland::ParticleStorage::ParticleStorage" ref="a9fbb72a6059e83c21ec70eb0057a814f" args="(int capacity, bool pack)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ParticleStorage::ParticleStorage </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>pack</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>capacity</em>&nbsp;</td><td>the maximum number of particles allocated and managed by this particle storage. This capacity is fixed and cannot change with time. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pack</em>&nbsp;</td><td>true to ensure that new particles are always created with the minimum available index. This can be useful to keep allocated particles tightly packed in memory. On the other hand the creation and destruction of particles takes logarithmic time instead of constant time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5349b2392ee0ecaeaf3b29fccea58609"></a><!-- doxytag: member="proland::ParticleStorage::~ParticleStorage" ref="a5349b2392ee0ecaeaf3b29fccea58609" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual proland::ParticleStorage::~ParticleStorage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes this <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>. </p>
<p>This deletes the data associated with all the particles managed by this particle storage. </p>

</div>
</div>
<a class="anchor" id="ad2f77f12733477e9e3852f33d29a6a8b"></a><!-- doxytag: member="proland::ParticleStorage::ParticleStorage" ref="ad2f77f12733477e9e3852f33d29a6a8b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ParticleStorage::ParticleStorage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new uninitialized <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2efe1d5ea5c1084d9776db3fb1015b74"></a><!-- doxytag: member="proland::ParticleStorage::clear" ref="a2efe1d5ea5c1084d9776db3fb1015b74" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleStorage::clear </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes the entire list of particles. </p>

</div>
</div>
<a class="anchor" id="a5b6c113dba81b5e5d449406884883133"></a><!-- doxytag: member="proland::ParticleStorage::deleteParticle" ref="a5b6c113dba81b5e5d449406884883133" args="(Particle *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleStorage::deleteParticle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes the given particle. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>a particle created by this particle storage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a32d85ba1baa13cf0698dd51096031d25"></a><!-- doxytag: member="proland::ParticleStorage::end" ref="a32d85ba1baa13cf0698dd51096031d25" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a>*&gt;::iterator proland::ParticleStorage::end </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns an iterator just past the last stored particle. </p>

</div>
</div>
<a class="anchor" id="a7a35744870b0db892d27198578b76060"></a><!-- doxytag: member="proland::ParticleStorage::getCapacity" ref="a7a35744870b0db892d27198578b76060" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::ParticleStorage::getCapacity </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the maximum number of particles that can be stored in this storage. </p>

</div>
</div>
<a class="anchor" id="abede53cb5e75f34770a7246504c9dada"></a><!-- doxytag: member="proland::ParticleStorage::getGpuStorage" ref="abede53cb5e75f34770a7246504c9dada" args="(const string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;TextureBuffer&gt; proland::ParticleStorage::getGpuStorage </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a texture buffer containing particles data on GPU. </p>
<p>The particles data on GPU is splitted in several textures (see <a class="el" href="classproland_1_1ParticleStorage.html#adf7625fbcfd7ff85f4cded5ee454be59" title="Initializes a GPU storage for the particles.">initGpuStorage()</a>) identified by names. This method returns the texture buffer whose name is given. Its associated GPU buffer can be used in a ork::MeshBuffers (via an ork::AttributeBuffer) to directly use the content of this texture as a vertex array.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>a gpu storage symbolic name (see <a class="el" href="classproland_1_1ParticleStorage.html#adf7625fbcfd7ff85f4cded5ee454be59" title="Initializes a GPU storage for the particles.">initGpuStorage()</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the GPU buffer corresponding to this GPU storage. </dd></dl>

</div>
</div>
<a class="anchor" id="afe1af2e325715fb799236ddfc927bfa1"></a><!-- doxytag: member="proland::ParticleStorage::getParticleIndex" ref="afe1af2e325715fb799236ddfc927bfa1" args="(Particle *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::ParticleStorage::getParticleIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the index of the given particle. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the index of the given particle. This index is between 0 and <a class="el" href="classproland_1_1ParticleStorage.html#a7a35744870b0db892d27198578b76060" title="Returns the maximum number of particles that can be stored in this storage.">getCapacity()</a> (excluded). </dd></dl>

</div>
</div>
<a class="anchor" id="ad7a5fe5966339c33185743e8111fb70d"></a><!-- doxytag: member="proland::ParticleStorage::getParticles" ref="ad7a5fe5966339c33185743e8111fb70d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a>*&gt;::iterator proland::ParticleStorage::getParticles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns an iterator to the first particle currently stored in this storage. </p>
<p>Provided the returned iterator is only used in a sequential way, particles can be added and removed while using this iterator. The iterator will only iterate through the particles that existed when this method was called, regardless of the creation and destruction of particles while iterating. This is no longer true, however, if several iterators are used at the same time and if several of them create and destroy particles while iterating.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the list of particles currently stored in this storage. </dd></dl>

</div>
</div>
<a class="anchor" id="a2072e272ca840f53f4dcddd1827a90ed"></a><!-- doxytag: member="proland::ParticleStorage::getParticlesCount" ref="a2072e272ca840f53f4dcddd1827a90ed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::ParticleStorage::getParticlesCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current number of particles stored in this storage. </p>

</div>
</div>
<a class="anchor" id="acee69c9378133c71c70e3fc43c2c2dd5"></a><!-- doxytag: member="proland::ParticleStorage::init" ref="acee69c9378133c71c70e3fc43c2c2dd5" args="(int capacity, bool pack)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleStorage::init </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>pack</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this <a class="el" href="classproland_1_1ParticleStorage.html" title="A storage to store particles.">ParticleStorage</a>. </p>
<p>See <a class="el" href="classproland_1_1ParticleStorage.html#a9fbb72a6059e83c21ec70eb0057a814f" title="Creates a new ParticleStorage.">ParticleStorage</a> </p>

</div>
</div>
<a class="anchor" id="aff8c856a12eb8d0c4bdf8aad3fd74857"></a><!-- doxytag: member="proland::ParticleStorage::initCpuStorage" ref="aff8c856a12eb8d0c4bdf8aad3fd74857" args="(int particleSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleStorage::initCpuStorage </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>particleSize</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the CPU storage for the particles. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>particleSize</em>&nbsp;</td><td>the size in bytes, on CPU, of each particle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adf7625fbcfd7ff85f4cded5ee454be59"></a><!-- doxytag: member="proland::ParticleStorage::initGpuStorage" ref="adf7625fbcfd7ff85f4cded5ee454be59" args="(const string &amp;name, TextureInternalFormat f, int components)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleStorage::initGpuStorage </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TextureInternalFormat&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>components</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a GPU storage for the particles. </p>
<p>The full GPU storage is supposed to be splitted in several textures, each texture storing one or more particle attribute (for instance one texture for positions, another for velocities, etc). All textures are texture buffers, (textures similar to 1D textures, whose pixels are accessible via a GPUBuffer) of <a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9" title="The maximum number of particles that can be stored in this storage.">capacity</a> * components pixels. Each texture is associated with a name, so that <a class="el" href="classproland_1_1ParticleLayer.html" title="An abstract layer for a ParticleProducer.">ParticleLayer</a> can access them with symbolic names.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>a symbolic name for this storage. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>the pixel format for this storage. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>components</em>&nbsp;</td><td>how many components of format f must be stored per particle in this GPU storage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af738ec19ac74f2bb1d35ed49275eb317"></a><!-- doxytag: member="proland::ParticleStorage::newParticle" ref="af738ec19ac74f2bb1d35ed49275eb317" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a>* proland::ParticleStorage::newParticle </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a new uninitialized particle. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a new particle, or NULL if the current number of particles stored in this storage is equal to its maximum capacity. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a716501da749ceece524fda79e5a794f6"></a><!-- doxytag: member="proland::ParticleStorage::available" ref="a716501da749ceece524fda79e5a794f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1ParticleStorage.html#a716501da749ceece524fda79e5a794f6">proland::ParticleStorage::available</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of available slots in <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562" title="The particles data on CPU.">particles</a> to store new particles. </p>

</div>
</div>
<a class="anchor" id="a760d70b0b8eaa1ade2f1c766c93f54f9"></a><!-- doxytag: member="proland::ParticleStorage::capacity" ref="a760d70b0b8eaa1ade2f1c766c93f54f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9">proland::ParticleStorage::capacity</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The maximum number of particles that can be stored in this storage. </p>

</div>
</div>
<a class="anchor" id="adbb8fa6edf998ba2f0f1db1dd4cfc211"></a><!-- doxytag: member="proland::ParticleStorage::freeAndAllocatedParticles" ref="adbb8fa6edf998ba2f0f1db1dd4cfc211" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">Particle</a>*&gt; <a class="el" href="classproland_1_1ParticleStorage.html#adbb8fa6edf998ba2f0f1db1dd4cfc211">proland::ParticleStorage::freeAndAllocatedParticles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointers to the free and allocated particles in <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562" title="The particles data on CPU.">particles</a>. </p>
<p>This vector is of size <a class="el" href="classproland_1_1ParticleStorage.html#a760d70b0b8eaa1ade2f1c766c93f54f9" title="The maximum number of particles that can be stored in this storage.">capacity</a>. Its first <a class="el" href="classproland_1_1ParticleStorage.html#a716501da749ceece524fda79e5a794f6" title="The number of available slots in particles to store new particles.">available</a> elements contain pointers to the free slots in <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562" title="The particles data on CPU.">particles</a>, arranged in a heap data structure (if <a class="el" href="classproland_1_1ParticleStorage.html#a897f3df3ed1f26f1b7a13e9a8378e178" title="True to ensure that new particles are always created with the minimum available index...">pack</a> is true). The remaining elements contain pointers to the currently allocated particles. </p>

</div>
</div>
<a class="anchor" id="aad98f8d5d969bf8d5a7e6a27098ce921"></a><!-- doxytag: member="proland::ParticleStorage::gpuTextures" ref="aad98f8d5d969bf8d5a7e6a27098ce921" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;string, ptr&lt;TextureBuffer&gt; &gt; <a class="el" href="classproland_1_1ParticleStorage.html#aad98f8d5d969bf8d5a7e6a27098ce921">proland::ParticleStorage::gpuTextures</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The particles data on GPU, in the form of texture buffers. </p>
<p>See initGPUStorage(). </p>

</div>
</div>
<a class="anchor" id="a897f3df3ed1f26f1b7a13e9a8378e178"></a><!-- doxytag: member="proland::ParticleStorage::pack" ref="a897f3df3ed1f26f1b7a13e9a8378e178" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classproland_1_1ParticleStorage.html#a897f3df3ed1f26f1b7a13e9a8378e178">proland::ParticleStorage::pack</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True to ensure that new particles are always created with the minimum available index. </p>
<p>See <a class="el" href="classproland_1_1ParticleStorage.html#a9fbb72a6059e83c21ec70eb0057a814f" title="Creates a new ParticleStorage.">ParticleStorage</a>. </p>

</div>
</div>
<a class="anchor" id="a745a08c3bc139c75a78bab3fa1cbe562"></a><!-- doxytag: member="proland::ParticleStorage::particles" ref="a745a08c3bc139c75a78bab3fa1cbe562" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="classproland_1_1ParticleStorage.html#a745a08c3bc139c75a78bab3fa1cbe562">proland::ParticleStorage::particles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The particles data on CPU. </p>
<p>This memory chunk is of size capacity * particleSize bytes. </p>

</div>
</div>
<a class="anchor" id="aad2cf9f9cce458adabb8034bfef79dc6"></a><!-- doxytag: member="proland::ParticleStorage::particleSize" ref="aad2cf9f9cce458adabb8034bfef79dc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1ParticleStorage.html#aad2cf9f9cce458adabb8034bfef79dc6">proland::ParticleStorage::particleSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The size in bytes, on CPU, of each particle. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat May 12 09:41:37 2012 for proland by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
