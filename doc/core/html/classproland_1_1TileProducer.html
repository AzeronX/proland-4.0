<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>proland: proland::TileProducer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>proland</b>::<a class="el" href="classproland_1_1TileProducer.html">TileProducer</a>
  </div>
</div>
<div class="contents">
<h1>proland::TileProducer Class Reference<br/>
<small>
[<a class="el" href="group__producer.html">producer</a>]</small>
</h1><!-- doxytag: class="proland::TileProducer" -->
<p>An abstract producer of tiles.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;TileProducer.h&gt;</code></p>

<p><a href="classproland_1_1TileProducer-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a90fde2947b3fd2c5ed4e2b1804871fd7">TileProducer</a> (const char *type, const char *<a class="el" href="classproland_1_1TileProducer.html#af0e63cad7ab6c2737b3b92a6ef717c3f">taskType</a>, ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt; <a class="el" href="classproland_1_1TileProducer.html#a6e7d2093ad2debe6cb0aef91fd7dceeb">cache</a>, bool <a class="el" href="classproland_1_1TileProducer.html#a42a53fa29b25dd9483dc7b0f0c68635b">gpuProducer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#a90fde2947b3fd2c5ed4e2b1804871fd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a7adf2a3bb8184343e0e4fe5ddcfbc283">~TileProducer</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#a7adf2a3bb8184343e0e4fe5ddcfbc283"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#abfad2424cfeddf05c3ad62408175e526">getRootQuadSize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size in meters of the root quad produced by this producer.  <a href="#abfad2424cfeddf05c3ad62408175e526"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#ab946c1b6c1d057048e9d5743113bf572">setRootQuadSize</a> (float size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the size in meters of the root quad produced by this producer.  <a href="#ab946c1b6c1d057048e9d5743113bf572"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a3f80c42e6ef622730ebf0b35f37db909">getId</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the id of this producer.  <a href="#a3f80c42e6ef622730ebf0b35f37db909"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#afa38fddd5b785e941fcdaaa37e43cdcc">getCache</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> that stores the tiles produced by this producer.  <a href="#afa38fddd5b785e941fcdaaa37e43cdcc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a57ef81d271cff94555850738f75ffb50">isGpuProducer</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if this producer produces textures on GPU.  <a href="#a57ef81d271cff94555850738f75ffb50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a21f1ca539b2bdb145898d6c5f61b0ed6">getBorder</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size in pixels of the border of each tile.  <a href="#a21f1ca539b2bdb145898d6c5f61b0ed6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a6d6d78b50379d88ed614902a8f70b837">hasTile</a> (int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if this producer can produce the given tile.  <a href="#a6d6d78b50379d88ed614902a8f70b837"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a2d2a79606cd9939a0360f628832d7cd4">hasChildren</a> (int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if this producer can produce the children of the given tile.  <a href="#a2d2a79606cd9939a0360f628832d7cd4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#af6a7253ba9180d042cd07bbfe2ff622b">findTile</a> (int level, int tx, int ty, bool includeCache=false, bool done=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Looks for a tile in the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> of this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#af6a7253ba9180d042cd07bbfe2ff622b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#adf72006cc497a5f13fe0dc3a7251879c">getTile</a> (int level, int tx, int ty, unsigned int deadline)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the requested tile, creating it if necessary.  <a href="#adf72006cc497a5f13fe0dc3a7251879c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec4f&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aee2bc84cdb4c840bb0488b2abc3d9c44">getGpuTileCoords</a> (int level, int tx, int ty, <a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> **tile)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the coordinates in the GPU storage of the given tile.  <a href="#aee2bc84cdb4c840bb0488b2abc3d9c44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a26096fefa49dad630a9bb809b9f8ddbb">prefetchTile</a> (int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedules a prefetch task to create the given tile.  <a href="#a26096fefa49dad630a9bb809b9f8ddbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#ac9371d0fda7c4a8314378ca438871a5b">putTile</a> (<a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> *t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrements the number of users of this tile by one.  <a href="#ac9371d0fda7c4a8314378ca438871a5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#ac0baa67cf52a32c0f24f03a9461b0e96">invalidateTiles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invalidates the tiles produced by this producer.  <a href="#ac0baa67cf52a32c0f24f03a9461b0e96"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a7835a42a5f449253f5bb19ba5b72919a">invalidateTile</a> (int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invalidates the selected tile produced by this producer.  <a href="#a7835a42a5f449253f5bb19ba5b72919a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aa951fc73faf28097774e2ddeb9306e30">update</a> (ptr&lt; SceneManager &gt; scene)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the tiles produced by this producer, if necessary.  <a href="#aa951fc73faf28097774e2ddeb9306e30"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#ad38dbec81a44de4e567a0d3d1580b7f8">updateTileMap</a> (float splitDistance, vec2f camera, int maxLevel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the GPU tile map for this producer.  <a href="#ad38dbec81a44de4e567a0d3d1580b7f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a1f005a3140a80c94a360e24fcb9e5981">getReferencedProducers</a> (vector&lt; ptr&lt; <a class="el" href="classproland_1_1TileProducer.html">TileProducer</a> &gt; &gt; &amp;producers) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the tile producers used by this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#a1f005a3140a80c94a360e24fcb9e5981"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a52c2a90a268c0717befa05a34b27af36">getLayerCount</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of layers of this producer.  <a href="#a52c2a90a268c0717befa05a34b27af36"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; <a class="el" href="classproland_1_1TileLayer.html">TileLayer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a8b6a235c5fbb039579e02272c7cdc7c9">getLayer</a> (int index) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the layer of this producer whose index is given.  <a href="#a8b6a235c5fbb039579e02272c7cdc7c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a9d4e7666903d03d4fa1553753ca73b54">hasLayers</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if the list of layers is not empty.  <a href="#a9d4e7666903d03d4fa1553753ca73b54"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aeddcca35ca49c9cbcf69f66a08c6e08d">addLayer</a> (ptr&lt; <a class="el" href="classproland_1_1TileLayer.html">TileLayer</a> &gt; l)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a Layer to this producer.  <a href="#aeddcca35ca49c9cbcf69f66a08c6e08d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a2d965e8a7304a5497cfffd21099abbdb">TileProducer</a> (const char *type, const char *<a class="el" href="classproland_1_1TileProducer.html#af0e63cad7ab6c2737b3b92a6ef717c3f">taskType</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates an uninitialized <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#a2d965e8a7304a5497cfffd21099abbdb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a5d5b6eaa93c4ba1449582b70ab2dc49d">init</a> (ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt; <a class="el" href="classproland_1_1TileProducer.html#a6e7d2093ad2debe6cb0aef91fd7dceeb">cache</a>, bool <a class="el" href="classproland_1_1TileProducer.html#a42a53fa29b25dd9483dc7b0f0c68635b">gpuProducer</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>.  <a href="#a5d5b6eaa93c4ba1449582b70ab2dc49d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#adfa248aba71573f05fe233cb7a24d07a">getContext</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the context for the Task that produce the tile data.  <a href="#adfa248aba71573f05fe233cb7a24d07a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual ptr&lt; Task &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aa5aac9c36fa41b28e3bd21cfaf55febd">startCreateTile</a> (int level, int tx, int ty, unsigned int deadline, ptr&lt; Task &gt; task, ptr&lt; TaskGraph &gt; owner)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts the creation of a tile of this producer.  <a href="#aa5aac9c36fa41b28e3bd21cfaf55febd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a6b4f7a3f79c7d2884cea382bc7e1ff9a">beginCreateTile</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the execution context for the Task that produces the tile data.  <a href="#a6b4f7a3f79c7d2884cea382bc7e1ff9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a15611db1a548547fe37ebfddee6f43f3">doCreateTile</a> (int level, int tx, int ty, <a class="el" href="classproland_1_1TileStorage_1_1Slot.html">TileStorage::Slot</a> *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates the given tile.  <a href="#a15611db1a548547fe37ebfddee6f43f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aa6b353663dcf1f69e3061378274d6dea">endCreateTile</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restores the execution context for the Task that produces the tile data.  <a href="#aa6b353663dcf1f69e3061378274d6dea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a48e287d37b0653ca0344314f76d619ac">stopCreateTile</a> (int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stops the creation of a tile of this producer.  <a href="#a48e287d37b0653ca0344314f76d619ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a17a5e76875417fdd7e3f9e93ce6a60a0">removeCreateTile</a> (Task *t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a task from the vector tasks.  <a href="#a17a5e76875417fdd7e3f9e93ce6a60a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; TaskGraph &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a63deb9011eb2ace09b3dcfcd0da07136">createTaskGraph</a> (ptr&lt; Task &gt; task)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a task graph for use in <a class="el" href="classproland_1_1TileProducer.html#aa5aac9c36fa41b28e3bd21cfaf55febd" title="Starts the creation of a tile of this producer.">startCreateTile</a>.  <a href="#a63deb9011eb2ace09b3dcfcd0da07136"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Task &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#aa051f6c09a389d3021457bcf9987572d">createTile</a> (int level, int tx, int ty, <a class="el" href="classproland_1_1TileStorage_1_1Slot.html">TileStorage::Slot</a> *data, unsigned int deadline, ptr&lt; Task &gt; old)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a Task to produce the data of the given tile.  <a href="#aa051f6c09a389d3021457bcf9987572d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; ptr&lt; <a class="el" href="classproland_1_1TileLayer.html">TileLayer</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a765d211dbcbe006f3b52185ca484e567">layers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The list of all the Layers used by this producer.  <a href="#a765d211dbcbe006f3b52185ca484e567"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; Task * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a8faa872cf0d76d47aba7107954a6e89c">tasks</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The list of all the Tasks created by this producer.  <a href="#a8faa872cf0d76d47aba7107954a6e89c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#af0e63cad7ab6c2737b3b92a6ef717c3f">taskType</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The type of the Task that produce the actual tile data.  <a href="#af0e63cad7ab6c2737b3b92a6ef717c3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a6e7d2093ad2debe6cb0aef91fd7dceeb">cache</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The tile cache that stores the tiles produced by this producer.  <a href="#a6e7d2093ad2debe6cb0aef91fd7dceeb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a42a53fa29b25dd9483dc7b0f0c68635b">gpuProducer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if this producer produces textures on GPU.  <a href="#a42a53fa29b25dd9483dc7b0f0c68635b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a4e6e6fa3f4fce37268ed7f5e46c294ad">id</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of this producer.  <a href="#a4e6e6fa3f4fce37268ed7f5e46c294ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a81bc0a39e668866f097fcff97a8eddb1">rootQuadSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size in meters of the root tile produced by this producer.  <a href="#a81bc0a39e668866f097fcff97a8eddb1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a1771a6bead17c17b58dd2ad5dd0585e5">tileMap</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The data of the tileMap texture line on GPU for this producer.  <a href="#a1771a6bead17c17b58dd2ad5dd0585e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileProducer.html#a05dd6eedf456a9c29f2712f2aee17d5e">mutex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A mutex to serialize parallel accesses to <a class="el" href="classproland_1_1TileProducer.html#a8faa872cf0d76d47aba7107954a6e89c" title="The list of all the Tasks created by this producer.">tasks</a>.  <a href="#a05dd6eedf456a9c29f2712f2aee17d5e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>An abstract producer of tiles. </p>
<p>Note that several <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a> can share the same <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>, and hence the same <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a>.</p>
<dl class="author"><dt><b>Authors:</b></dt><dd>Eric Bruneton, Antoine Begault, Guillaume Piolat </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a90fde2947b3fd2c5ed4e2b1804871fd7"></a><!-- doxytag: member="proland::TileProducer::TileProducer" ref="a90fde2947b3fd2c5ed4e2b1804871fd7" args="(const char *type, const char *taskType, ptr&lt; TileCache &gt; cache, bool gpuProducer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::TileProducer::TileProducer </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>taskType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>gpuProducer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type of this producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>taskType</em>&nbsp;</td><td>the type of the Task that produce the actual tile data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cache</em>&nbsp;</td><td>the tile cache that stores the tiles produced by this producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gpuProducer</em>&nbsp;</td><td>true if this producer produces textures on GPU. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7adf2a3bb8184343e0e4fe5ddcfbc283"></a><!-- doxytag: member="proland::TileProducer::~TileProducer" ref="a7adf2a3bb8184343e0e4fe5ddcfbc283" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual proland::TileProducer::~TileProducer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>

</div>
</div>
<a class="anchor" id="a2d965e8a7304a5497cfffd21099abbdb"></a><!-- doxytag: member="proland::TileProducer::TileProducer" ref="a2d965e8a7304a5497cfffd21099abbdb" args="(const char *type, const char *taskType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::TileProducer::TileProducer </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>taskType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates an uninitialized <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type of this producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>taskType</em>&nbsp;</td><td>the type of the Task that produce the actual tile data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aeddcca35ca49c9cbcf69f66a08c6e08d"></a><!-- doxytag: member="proland::TileProducer::addLayer" ref="aeddcca35ca49c9cbcf69f66a08c6e08d" args="(ptr&lt; TileLayer &gt; l)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileProducer::addLayer </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1TileLayer.html">TileLayer</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>l</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a Layer to this producer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>l</em>&nbsp;</td><td>the layer to be added. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6b4f7a3f79c7d2884cea382bc7e1ff9a"></a><!-- doxytag: member="proland::TileProducer::beginCreateTile" ref="a6b4f7a3f79c7d2884cea382bc7e1ff9a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::beginCreateTile </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the execution context for the Task that produces the tile data. </p>
<p>This is only needed for GPU tasks (see Task::begin). The default implementation of this method calls Layer::beginCreateTile on each Layer of this producer. </p>

</div>
</div>
<a class="anchor" id="a63deb9011eb2ace09b3dcfcd0da07136"></a><!-- doxytag: member="proland::TileProducer::createTaskGraph" ref="a63deb9011eb2ace09b3dcfcd0da07136" args="(ptr&lt; Task &gt; task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;TaskGraph&gt; proland::TileProducer::createTaskGraph </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; Task &gt;&nbsp;</td>
          <td class="paramname"> <em>task</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a task graph for use in <a class="el" href="classproland_1_1TileProducer.html#aa5aac9c36fa41b28e3bd21cfaf55febd" title="Starts the creation of a tile of this producer.">startCreateTile</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>a task that will be added to the returned task graph. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a task graph containing 'task', for use in <a class="el" href="classproland_1_1TileProducer.html#aa5aac9c36fa41b28e3bd21cfaf55febd" title="Starts the creation of a tile of this producer.">startCreateTile</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="aa051f6c09a389d3021457bcf9987572d"></a><!-- doxytag: member="proland::TileProducer::createTile" ref="aa051f6c09a389d3021457bcf9987572d" args="(int level, int tx, int ty, TileStorage::Slot *data, unsigned int deadline, ptr&lt; Task &gt; old)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Task&gt; proland::TileProducer::createTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproland_1_1TileStorage_1_1Slot.html">TileStorage::Slot</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>deadline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Task &gt;&nbsp;</td>
          <td class="paramname"> <em>old</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a Task to produce the data of the given tile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>where the produced tile data must be stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>deadline</em>&nbsp;</td><td>the deadline at which the tile data must be ready. 0 means the current frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>the existing task to create this tile if it still exists, or NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a15611db1a548547fe37ebfddee6f43f3"></a><!-- doxytag: member="proland::TileProducer::doCreateTile" ref="a15611db1a548547fe37ebfddee6f43f3" args="(int level, int tx, int ty, TileStorage::Slot *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool proland::TileProducer::doCreateTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproland_1_1TileStorage_1_1Slot.html">TileStorage::Slot</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates the given tile. </p>
<p>If this task requires tiles produced by other producers (or other tiles produced by this producer), these tiles must be acquired and released in <a class="el" href="classproland_1_1TileProducer.html#aa5aac9c36fa41b28e3bd21cfaf55febd" title="Starts the creation of a tile of this producer.">startCreateTile</a> and <a class="el" href="classproland_1_1TileProducer.html#a48e287d37b0653ca0344314f76d619ac" title="Stops the creation of a tile of this producer.">stopCreateTile</a> with <a class="el" href="classproland_1_1TileProducer.html#adf72006cc497a5f13fe0dc3a7251879c" title="Returns the requested tile, creating it if necessary.">getTile</a> and <a class="el" href="classproland_1_1TileProducer.html#ac9371d0fda7c4a8314378ca438871a5b" title="Decrements the number of users of this tile by one.">putTile</a>, and retrieved in this method with <a class="el" href="classproland_1_1TileProducer.html#af6a7253ba9180d042cd07bbfe2ff622b" title="Looks for a tile in the TileCache of this TileProducer.">findTile</a>. The default implementation of this method calls Layer::doCreateTile on each Layer of this producer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>where the created tile data must be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true the result of this creation is different from the result of the last creation of this tile. See Task::run. </dd></dl>

</div>
</div>
<a class="anchor" id="aa6b353663dcf1f69e3061378274d6dea"></a><!-- doxytag: member="proland::TileProducer::endCreateTile" ref="aa6b353663dcf1f69e3061378274d6dea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::endCreateTile </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restores the execution context for the Task that produces the tile data. </p>
<p>This is only needed for GPU tasks (see Task::end). The default implementation of this method calls Layer::endCreateTile on each Layer of this producer. </p>

</div>
</div>
<a class="anchor" id="af6a7253ba9180d042cd07bbfe2ff622b"></a><!-- doxytag: member="proland::TileProducer::findTile" ref="af6a7253ba9180d042cd07bbfe2ff622b" args="(int level, int tx, int ty, bool includeCache=false, bool done=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a>* proland::TileProducer::findTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>includeCache</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>done</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks for a tile in the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> of this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>includeCache</em>&nbsp;</td><td>true to include both used and unused tiles in the search, false to include only the used tiles. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>done</em>&nbsp;</td><td>true to check that the tile's creation task is done. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the requested tile, or NULL if it is not in the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> or if 'done' is true, if it is not ready. This method does not change the number of users of the returned tile. </dd></dl>

</div>
</div>
<a class="anchor" id="a21f1ca539b2bdb145898d6c5f61b0ed6"></a><!-- doxytag: member="proland::TileProducer::getBorder" ref="a21f1ca539b2bdb145898d6c5f61b0ed6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int proland::TileProducer::getBorder </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the size in pixels of the border of each tile. </p>
<p>Tiles made of raster data may have a border that contains the value of the neighboring pixels of the tile. For instance if the tile size (returned by <a class="el" href="classproland_1_1TileStorage.html#ae66382011e62a44b068a207fa8c8deb3" title="Returns the size of each tile.">TileStorage::getTileSize</a>) is 196, and if the tile border is 2, this means that the actual tile data is 192x192 pixels, with a 2 pixel border that contains the value of the neighboring pixels. Using a border introduces data redundancy but is usefull to get the value of the neighboring pixels of a tile without needing to load the neighboring tiles. </p>

</div>
</div>
<a class="anchor" id="afa38fddd5b785e941fcdaaa37e43cdcc"></a><!-- doxytag: member="proland::TileProducer::getCache" ref="afa38fddd5b785e941fcdaaa37e43cdcc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ptr&lt;<a class="el" href="classproland_1_1TileCache.html">TileCache</a>&gt; proland::TileProducer::getCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> that stores the tiles produced by this producer. </p>

</div>
</div>
<a class="anchor" id="adfa248aba71573f05fe233cb7a24d07a"></a><!-- doxytag: member="proland::TileProducer::getContext" ref="adfa248aba71573f05fe233cb7a24d07a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void* proland::TileProducer::getContext </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the context for the Task that produce the tile data. </p>
<p>This is only needed for GPU tasks (see Task::getContext). The default implementation of this method does nothing and returns NULL. </p>

</div>
</div>
<a class="anchor" id="aee2bc84cdb4c840bb0488b2abc3d9c44"></a><!-- doxytag: member="proland::TileProducer::getGpuTileCoords" ref="aee2bc84cdb4c840bb0488b2abc3d9c44" args="(int level, int tx, int ty, TileCache::Tile **tile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec4f proland::TileProducer::getGpuTileCoords </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> **&nbsp;</td>
          <td class="paramname"> <em>tile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the coordinates in the GPU storage of the given tile. </p>
<p>If the given tile is not in the GPU storage, this method uses the first ancestor of this tile that is in the storage. It then returns the coordinates of the area of this ancestor tile that correspond to the requested tile.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>tile</em>&nbsp;</td><td>the tile (level,tx,ty) or its first ancestor that is in the storage, if known. If no tile is specified (passing NULL) this method finds it and returns it in this parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the coordinates in the GPU storage texture of the requested tile. The x,y components correspond to the lower left corner of the tile in the GPU storage texture. The z,w components correspond to the width and height of the tile. All components are in texture coordinates, between 0 and 1. If the tile has borders, the returned coordinates correspond to the inside of the tile, excluding its border. </dd></dl>

</div>
</div>
<a class="anchor" id="a3f80c42e6ef622730ebf0b35f37db909"></a><!-- doxytag: member="proland::TileProducer::getId" ref="a3f80c42e6ef622730ebf0b35f37db909" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::TileProducer::getId </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the id of this producer. </p>
<p>This id is local to the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> used by this producer, and is used to distinguish all the producers that use this cache. </p>

</div>
</div>
<a class="anchor" id="a8b6a235c5fbb039579e02272c7cdc7c9"></a><!-- doxytag: member="proland::TileProducer::getLayer" ref="a8b6a235c5fbb039579e02272c7cdc7c9" args="(int index) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;<a class="el" href="classproland_1_1TileLayer.html">TileLayer</a>&gt; proland::TileProducer::getLayer </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the layer of this producer whose index is given. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>a layer index between 0 and <a class="el" href="classproland_1_1TileProducer.html#a52c2a90a268c0717befa05a34b27af36" title="Returns the number of layers of this producer.">getLayerCount</a> (exclusive). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a52c2a90a268c0717befa05a34b27af36"></a><!-- doxytag: member="proland::TileProducer::getLayerCount" ref="a52c2a90a268c0717befa05a34b27af36" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::TileProducer::getLayerCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of layers of this producer. </p>

</div>
</div>
<a class="anchor" id="a1f005a3140a80c94a360e24fcb9e5981"></a><!-- doxytag: member="proland::TileProducer::getReferencedProducers" ref="a1f005a3140a80c94a360e24fcb9e5981" args="(vector&lt; ptr&lt; TileProducer &gt; &gt; &amp;producers) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::getReferencedProducers </td>
          <td>(</td>
          <td class="paramtype">vector&lt; ptr&lt; <a class="el" href="classproland_1_1TileProducer.html">TileProducer</a> &gt; &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>producers</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the tile producers used by this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>producers</em>&nbsp;</td><td>the tile producers used by this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abfad2424cfeddf05c3ad62408175e526"></a><!-- doxytag: member="proland::TileProducer::getRootQuadSize" ref="abfad2424cfeddf05c3ad62408175e526" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float proland::TileProducer::getRootQuadSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the size in meters of the root quad produced by this producer. </p>

</div>
</div>
<a class="anchor" id="adf72006cc497a5f13fe0dc3a7251879c"></a><!-- doxytag: member="proland::TileProducer::getTile" ref="adf72006cc497a5f13fe0dc3a7251879c" args="(int level, int tx, int ty, unsigned int deadline)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a>* proland::TileProducer::getTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>deadline</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the requested tile, creating it if necessary. </p>
<p>If the tile is currently in use it is returned directly. If it is in cache but unused, it marked as used and returned. Otherwise a new tile is created, marked as used and returned. In all cases the number of users of this tile is incremented by one.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>deadline</em>&nbsp;</td><td>the deadline at which the tile data must be ready. 0 means the current frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the requested tile, or NULL if there is no room left in the <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a> to store the requested tile. </dd></dl>

</div>
</div>
<a class="anchor" id="a2d2a79606cd9939a0360f628832d7cd4"></a><!-- doxytag: member="proland::TileProducer::hasChildren" ref="a2d2a79606cd9939a0360f628832d7cd4" args="(int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proland::TileProducer::hasChildren </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if this producer can produce the children of the given tile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9d4e7666903d03d4fa1553753ca73b54"></a><!-- doxytag: member="proland::TileProducer::hasLayers" ref="a9d4e7666903d03d4fa1553753ca73b54" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proland::TileProducer::hasLayers </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the list of layers is not empty. </p>
<p>False otherwise. </p>

</div>
</div>
<a class="anchor" id="a6d6d78b50379d88ed614902a8f70b837"></a><!-- doxytag: member="proland::TileProducer::hasTile" ref="a6d6d78b50379d88ed614902a8f70b837" args="(int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool proland::TileProducer::hasTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if this producer can produce the given tile. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5d5b6eaa93c4ba1449582b70ab2dc49d"></a><!-- doxytag: member="proland::TileProducer::init" ref="a5d5b6eaa93c4ba1449582b70ab2dc49d" args="(ptr&lt; TileCache &gt; cache, bool gpuProducer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileProducer::init </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1TileCache.html">TileCache</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>gpuProducer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cache</em>&nbsp;</td><td>the tile cache that stores the tiles produced by this producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gpuProducer</em>&nbsp;</td><td>true if this producer produces textures on GPU. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7835a42a5f449253f5bb19ba5b72919a"></a><!-- doxytag: member="proland::TileProducer::invalidateTile" ref="a7835a42a5f449253f5bb19ba5b72919a" args="(int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::invalidateTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates the selected tile produced by this producer. </p>
<p>This means that the tasks to produce the actual data of this tile will be automatically reexecuted before the data can be used. </p>

</div>
</div>
<a class="anchor" id="ac0baa67cf52a32c0f24f03a9461b0e96"></a><!-- doxytag: member="proland::TileProducer::invalidateTiles" ref="ac0baa67cf52a32c0f24f03a9461b0e96" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::invalidateTiles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates the tiles produced by this producer. </p>
<p>This means that the tasks to produce the actual data of these tiles will be automatically reexecuted before the data can be used. </p>

</div>
</div>
<a class="anchor" id="a57ef81d271cff94555850738f75ffb50"></a><!-- doxytag: member="proland::TileProducer::isGpuProducer" ref="a57ef81d271cff94555850738f75ffb50" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proland::TileProducer::isGpuProducer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if this producer produces textures on GPU. </p>

</div>
</div>
<a class="anchor" id="a26096fefa49dad630a9bb809b9f8ddbb"></a><!-- doxytag: member="proland::TileProducer::prefetchTile" ref="a26096fefa49dad630a9bb809b9f8ddbb" args="(int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool proland::TileProducer::prefetchTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedules a prefetch task to create the given tile. </p>
<p>If the requested tile is currently in use or in cache but unused, this method does nothing. Otherwise it gets an unused tile storage (evicting an unused tile if necessary), and then creates and schedules a task to produce the data of the requested tile.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this method has been able to schedule a prefetch task for the given tile. </dd></dl>

</div>
</div>
<a class="anchor" id="ac9371d0fda7c4a8314378ca438871a5b"></a><!-- doxytag: member="proland::TileProducer::putTile" ref="ac9371d0fda7c4a8314378ca438871a5b" args="(TileCache::Tile *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::putTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">TileCache::Tile</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrements the number of users of this tile by one. </p>
<p>If this number becomes 0 the tile is marked as unused, and so can be evicted from the cache at any moment.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>a tile currently in use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a17a5e76875417fdd7e3f9e93ce6a60a0"></a><!-- doxytag: member="proland::TileProducer::removeCreateTile" ref="a17a5e76875417fdd7e3f9e93ce6a60a0" args="(Task *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileProducer::removeCreateTile </td>
          <td>(</td>
          <td class="paramtype">Task *&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes a task from the vector tasks. </p>
<p>This is used to avoid delete-calls for objects that were already deleted. This is called when a task created by this producer gets deleted. </p>

</div>
</div>
<a class="anchor" id="ab946c1b6c1d057048e9d5743113bf572"></a><!-- doxytag: member="proland::TileProducer::setRootQuadSize" ref="ab946c1b6c1d057048e9d5743113bf572" args="(float size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::setRootQuadSize </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the size in meters of the root quad produced by this producer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the size of the root quad of this producer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa5aac9c36fa41b28e3bd21cfaf55febd"></a><!-- doxytag: member="proland::TileProducer::startCreateTile" ref="aa5aac9c36fa41b28e3bd21cfaf55febd" args="(int level, int tx, int ty, unsigned int deadline, ptr&lt; Task &gt; task, ptr&lt; TaskGraph &gt; owner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual ptr&lt;Task&gt; proland::TileProducer::startCreateTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>deadline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Task &gt;&nbsp;</td>
          <td class="paramname"> <em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; TaskGraph &gt;&nbsp;</td>
          <td class="paramname"> <em>owner</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the creation of a tile of this producer. </p>
<p>This method is used for producers that need tiles produced by other producers to create a tile. In these cases this method must acquire these other tiles with <a class="el" href="classproland_1_1TileProducer.html#adf72006cc497a5f13fe0dc3a7251879c" title="Returns the requested tile, creating it if necessary.">getTile</a> so that these tiles are available with <a class="el" href="classproland_1_1TileProducer.html#af6a7253ba9180d042cd07bbfe2ff622b" title="Looks for a tile in the TileCache of this TileProducer.">findTile</a> during the actual tile creation in <a class="el" href="classproland_1_1TileProducer.html#a15611db1a548547fe37ebfddee6f43f3" title="Creates the given tile.">doCreateTile</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>deadline</em>&nbsp;</td><td>the deadline at which the tile data must be ready. 0 means the current frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>the task to produce the tile itself. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>owner</em>&nbsp;</td><td>the task graph that contains 'task', or NULL. This task graph can be used if 'task' depends on other tasks. These other tasks must then be added to 'owner'. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the task or task graph to produce the tile itself, and all the tiles needed to produce it. The default implementation of this method calls Layer::startCreateTile on each layer, and returns 'owner' if it is not NULL (otherwise it returns 'task'). NOTE: if a task graph is returned, it must be created with <a class="el" href="classproland_1_1TileProducer.html#a63deb9011eb2ace09b3dcfcd0da07136" title="Creates a task graph for use in startCreateTile.">createTaskGraph</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="a48e287d37b0653ca0344314f76d619ac"></a><!-- doxytag: member="proland::TileProducer::stopCreateTile" ref="a48e287d37b0653ca0344314f76d619ac" args="(int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::stopCreateTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops the creation of a tile of this producer. </p>
<p>This method is used for producers that need tiles produced by other producers to create a tile. In these cases this method must release these other tiles with <a class="el" href="classproland_1_1TileProducer.html#ac9371d0fda7c4a8314378ca438871a5b" title="Decrements the number of users of this tile by one.">putTile</a> so that these tiles can be evicted from the cache after use. The default implementation of this method calls Layer::stopCreateTile on each Layer of this producer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa951fc73faf28097774e2ddeb9306e30"></a><!-- doxytag: member="proland::TileProducer::update" ref="aa951fc73faf28097774e2ddeb9306e30" args="(ptr&lt; SceneManager &gt; scene)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::TileProducer::update </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; SceneManager &gt;&nbsp;</td>
          <td class="paramname"> <em>scene</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the tiles produced by this producer, if necessary. </p>
<p>The default implementation of this method does nothing. </p>

</div>
</div>
<a class="anchor" id="ad38dbec81a44de4e567a0d3d1580b7f8"></a><!-- doxytag: member="proland::TileProducer::updateTileMap" ref="ad38dbec81a44de4e567a0d3d1580b7f8" args="(float splitDistance, vec2f camera, int maxLevel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool proland::TileProducer::updateTileMap </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>splitDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vec2f&nbsp;</td>
          <td class="paramname"> <em>camera</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxLevel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the GPU tile map for this producer. </p>
<p>A GPU tile map allows a GPU shader to retrieve the data of any tile from its level,tx,ty coordinates, thanks to a mapping between these coordinates and texture tile storage u,v coordinates, stored in the tile map. This is only possible if the quadtree of tiles is subdivided only based on the distance to the camera. The camera position and the subdivision parameters are needed to create the tile map and to decode it on GPU.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>splitDistance</em>&nbsp;</td><td>the distance at which a quad is subdivided. In fact a quad is supposed to be subdivided if the camera distance is less than splitDistance times the quad size (in meters). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>camera</em>&nbsp;</td><td>the camera position. This position, together with splitDistance and rootQuadSize completely define the current quadtree (i.e. which quads are subdivided, and which are not). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxLevel</em>&nbsp;</td><td>the maximum subdivision level of the quadtree (included). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the tile storage for this producer has a tile map (see <a class="el" href="classproland_1_1GPUTileStorage.html#ac640d756983a1c0ab63bbefcae7751ad" title="Returns the tile map that stores the mapping between logical tile coordinates (level...">GPUTileStorage::getTileMap</a>). Otherwise this method does nothing. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a6e7d2093ad2debe6cb0aef91fd7dceeb"></a><!-- doxytag: member="proland::TileProducer::cache" ref="a6e7d2093ad2debe6cb0aef91fd7dceeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;<a class="el" href="classproland_1_1TileCache.html">TileCache</a>&gt; <a class="el" href="classproland_1_1TileProducer.html#a6e7d2093ad2debe6cb0aef91fd7dceeb">proland::TileProducer::cache</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The tile cache that stores the tiles produced by this producer. </p>

</div>
</div>
<a class="anchor" id="a42a53fa29b25dd9483dc7b0f0c68635b"></a><!-- doxytag: member="proland::TileProducer::gpuProducer" ref="a42a53fa29b25dd9483dc7b0f0c68635b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classproland_1_1TileProducer.html#a42a53fa29b25dd9483dc7b0f0c68635b">proland::TileProducer::gpuProducer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if this producer produces textures on GPU. </p>

</div>
</div>
<a class="anchor" id="a4e6e6fa3f4fce37268ed7f5e46c294ad"></a><!-- doxytag: member="proland::TileProducer::id" ref="a4e6e6fa3f4fce37268ed7f5e46c294ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1TileProducer.html#a4e6e6fa3f4fce37268ed7f5e46c294ad">proland::TileProducer::id</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The id of this producer. </p>
<p>This id is local to the <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> used by this producer, and is used to distinguish all the producers that use this cache. </p>

</div>
</div>
<a class="anchor" id="a765d211dbcbe006f3b52185ca484e567"></a><!-- doxytag: member="proland::TileProducer::layers" ref="a765d211dbcbe006f3b52185ca484e567" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; ptr&lt;<a class="el" href="classproland_1_1TileLayer.html">TileLayer</a>&gt; &gt; <a class="el" href="classproland_1_1TileProducer.html#a765d211dbcbe006f3b52185ca484e567">proland::TileProducer::layers</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The list of all the Layers used by this producer. </p>

</div>
</div>
<a class="anchor" id="a05dd6eedf456a9c29f2712f2aee17d5e"></a><!-- doxytag: member="proland::TileProducer::mutex" ref="a05dd6eedf456a9c29f2712f2aee17d5e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="classproland_1_1TileProducer.html#a05dd6eedf456a9c29f2712f2aee17d5e">proland::TileProducer::mutex</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A mutex to serialize parallel accesses to <a class="el" href="classproland_1_1TileProducer.html#a8faa872cf0d76d47aba7107954a6e89c" title="The list of all the Tasks created by this producer.">tasks</a>. </p>

</div>
</div>
<a class="anchor" id="a81bc0a39e668866f097fcff97a8eddb1"></a><!-- doxytag: member="proland::TileProducer::rootQuadSize" ref="a81bc0a39e668866f097fcff97a8eddb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classproland_1_1TileProducer.html#a81bc0a39e668866f097fcff97a8eddb1">proland::TileProducer::rootQuadSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The size in meters of the root tile produced by this producer. </p>

</div>
</div>
<a class="anchor" id="a8faa872cf0d76d47aba7107954a6e89c"></a><!-- doxytag: member="proland::TileProducer::tasks" ref="a8faa872cf0d76d47aba7107954a6e89c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;Task*&gt; <a class="el" href="classproland_1_1TileProducer.html#a8faa872cf0d76d47aba7107954a6e89c">proland::TileProducer::tasks</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The list of all the Tasks created by this producer. </p>

</div>
</div>
<a class="anchor" id="af0e63cad7ab6c2737b3b92a6ef717c3f"></a><!-- doxytag: member="proland::TileProducer::taskType" ref="af0e63cad7ab6c2737b3b92a6ef717c3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="classproland_1_1TileProducer.html#af0e63cad7ab6c2737b3b92a6ef717c3f">proland::TileProducer::taskType</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The type of the Task that produce the actual tile data. </p>

</div>
</div>
<a class="anchor" id="a1771a6bead17c17b58dd2ad5dd0585e5"></a><!-- doxytag: member="proland::TileProducer::tileMap" ref="a1771a6bead17c17b58dd2ad5dd0585e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* <a class="el" href="classproland_1_1TileProducer.html#a1771a6bead17c17b58dd2ad5dd0585e5">proland::TileProducer::tileMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The data of the tileMap texture line on GPU for this producer. </p>
<p>If a quadtree is subdivided based only on the distance to the camera, it is possible to compute on GPU which level,tx,ty tile corresponds to an x,y position in meters. But in order to compute where the data of this tile is stored in a texture tile storage, the mapping between level,tx,ty coordinates and texture tile storage u,v coordinates is needed. A tileMap provides this information (it must be updated each time the camera moves or the tile storage layout changes). Each line of this tileMap corresponds to a single producer. Only GPU producers can have a tileMap. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat May 12 09:41:38 2012 for proland by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
