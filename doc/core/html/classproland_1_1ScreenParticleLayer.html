<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>proland: proland::ScreenParticleLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>proland</b>::<a class="el" href="classproland_1_1ScreenParticleLayer.html">ScreenParticleLayer</a>
  </div>
</div>
<div class="contents">
<h1>proland::ScreenParticleLayer Class Reference<br/>
<small>
[<a class="el" href="group__screen.html">screen</a>]</small>
</h1><!-- doxytag: class="proland::ScreenParticleLayer" --><!-- doxytag: inherits="proland::ParticleLayer" -->
<p>A <a class="el" href="classproland_1_1ParticleLayer.html" title="An abstract layer for a ParticleProducer.">ParticleLayer</a> to force particles to stay in the viewport, with a uniform density.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ScreenParticleLayer.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for proland::ScreenParticleLayer:</div>
<div class="dynsection">
 <div class="center">
  <img src="classproland_1_1ScreenParticleLayer.gif" usemap="#proland::ScreenParticleLayer_map" alt=""/>
  <map id="proland::ScreenParticleLayer_map" name="proland::ScreenParticleLayer_map">
<area href="classproland_1_1ParticleLayer.html" alt="proland::ParticleLayer" shape="rect" coords="0,0,178,24"/>
</map>
 </div>
</div>

<p><a href="classproland_1_1ScreenParticleLayer-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Layer specific particle data for managing particles in screen space.  <a href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8">status</a> { <br/>
&nbsp;&nbsp;<a class="el" href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8a6a1d01cc63ce3b14a3d06ff50d43c8cc">AGE</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8afdf44368e2debefa5dbab94c5fcf58e1">OUTSIDE_VIEWPORT</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8a8a33c93d50c8cb9b885aae7210a741d0">POISSON_DISK</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The reason why a particle is fading out. </p>
 <a href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a8ae2c39ec7697a66de43920b44a8efe9">ScreenParticleLayer</a> (float <a class="el" href="classproland_1_1ScreenParticleLayer.html#a093427a709c98d4b976746d1b96bc8b2">radius</a>, ptr&lt; Texture2D &gt; offscreenDepthBuffer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>.  <a href="#a8ae2c39ec7697a66de43920b44a8efe9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a0594a176549ea51972a277b2513e1ba0">~ScreenParticleLayer</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes this <a class="el" href="classproland_1_1LifeCycleParticleLayer.html" title="A ParticleLayer to manage the lifecycle of particles.">LifeCycleParticleLayer</a>.  <a href="#a0594a176549ea51972a277b2513e1ba0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a83a9d526847c9dca71025dbe44393b69">getParticleRadius</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the Poisson-disk radius of each particle, in pixels.  <a href="#a83a9d526847c9dca71025dbe44393b69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a100afc8f120ecf1b324d2b71cfe7d53e">setParticleRadius</a> (float <a class="el" href="classproland_1_1ScreenParticleLayer.html#a093427a709c98d4b976746d1b96bc8b2">radius</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the Poisson-disk radius of each particle, in pixels.  <a href="#a100afc8f120ecf1b324d2b71cfe7d53e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#abb105879685b36a7e888595fa8cf0114">getScreenParticle</a> (<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">ParticleStorage::Particle</a> *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the screen space specific data of the given particle.  <a href="#abb105879685b36a7e888595fa8cf0114"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#aa241be68f327cf371aba0167dd5b4975">setSceneManager</a> (SceneManager *manager)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the scene manager used to set the world to screen transformation.  <a href="#aa241be68f327cf371aba0167dd5b4975"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a83477bc6ab222c2b90031bed5d11f09e">moveParticles</a> (double dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves the existing particles.  <a href="#a83477bc6ab222c2b90031bed5d11f09e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a691476aaa68718e6f5d2f9d9382edd16">removeOldParticles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes old particles.  <a href="#a691476aaa68718e6f5d2f9d9382edd16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#ac602d294ada65e352f37015a9fefd704">addNewParticles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds new particles.  <a href="#ac602d294ada65e352f37015a9fefd704"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a698c9a05048846905a9f72ec53ebccf9">getNeighbors</a> (<a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *s, int &amp;n)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the neighbors of the given screen particle.  <a href="#a698c9a05048846905a9f72ec53ebccf9"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a29179f49211d7dc0416a8b00b01b6bd7">ScreenParticleLayer</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates an uninitialized <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>.  <a href="#a29179f49211d7dc0416a8b00b01b6bd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a64b25eb06300fae33519bbca8a3adeba">init</a> (float <a class="el" href="classproland_1_1ScreenParticleLayer.html#a093427a709c98d4b976746d1b96bc8b2">radius</a>, ptr&lt; Texture2D &gt; offscreenDepthBuffer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes this <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>.  <a href="#a64b25eb06300fae33519bbca8a3adeba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a8309e8e82bd0084b1e50124dca9bc6b5">initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes this <a class="el" href="classproland_1_1ParticleLayer.html" title="An abstract layer for a ParticleProducer.">ParticleLayer</a>.  <a href="#a8309e8e82bd0084b1e50124dca9bc6b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#aec38562f78c78d6e1632483aa21cff3a">initParticle</a> (<a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">ParticleStorage::Particle</a> *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the data that is specific to this layer in the given particle.  <a href="#aec38562f78c78d6e1632483aa21cff3a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a05de4d0947e5ab3d3a35c1f5468b4455">findNeighborRanges</a> (<a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates <a class="el" href="classproland_1_1ScreenParticleLayer.html#a2c8c4148d2efc2a7cd73a24f57b3e33a" title="Data structure used to find where to create new particles, so that they form a Poisson-disk...">ranges</a> based on the neighbors of the given particle.  <a href="#a05de4d0947e5ab3d3a35c1f5468b4455"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a6433f8e3d4dcaf71718d2df677b2d129">newScreenParticle</a> (const vec2f &amp;pos)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new particle at the given position, and adds it to <a class="el" href="classproland_1_1ScreenParticleLayer.html#a01d6a23849e1f2d2c433e6a563a991f1" title="A ParticleGrid to store particles according to their screen position.">grid</a>.  <a href="#a6433f8e3d4dcaf71718d2df677b2d129"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a111f895f9c65ce91293c0b0c825d5216">getParticleDepths</a> (const vector&lt; <a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> * &gt; &amp;particles)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the depths of the given particles from the depth buffer.  <a href="#a111f895f9c65ce91293c0b0c825d5216"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SceneManager *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a232a5af389c532f25417d62b293209a2">scene</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The scene manager, used to get the world to screen transformation.  <a href="#a232a5af389c532f25417d62b293209a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a093427a709c98d4b976746d1b96bc8b2">radius</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The Poisson-disk radius of each particle, in pixels.  <a href="#a093427a709c98d4b976746d1b96bc8b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">box2f&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a202a70b2b9f147de293100490de9acb7">bounds</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The current bounds of the viewport, in pixels.  <a href="#a202a70b2b9f147de293100490de9acb7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1ParticleGrid.html">ParticleGrid</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a01d6a23849e1f2d2c433e6a563a991f1">grid</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a> to store particles according to their screen position.  <a href="#a01d6a23849e1f2d2c433e6a563a991f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">RangeList *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a2c8c4148d2efc2a7cd73a24f57b3e33a">ranges</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data structure used to find where to create new particles, so that they form a Poisson-disk distribution.  <a href="#a2c8c4148d2efc2a7cd73a24f57b3e33a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">mat4d&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#af119e02199bebcb49180d7f7f8ee7814">lastWorldToScreen</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The world to screen transformation of the last frame.  <a href="#af119e02199bebcb49180d7f7f8ee7814"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec4i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a5723280e55af4ebe6da1bc869d7445b7">lastViewport</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The viewport of the last frame.  <a href="#a5723280e55af4ebe6da1bc869d7445b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a4686f0dd24906b6539d740caa68bcdae">depthBufferRead</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if the camera is not moving, and if the depth buffer has been read into <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470" title="Array used to get the depth of the particles created at this frame or the depth of...">depthArray</a>.  <a href="#a4686f0dd24906b6539d740caa68bcdae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#ac62e59e1479d21afdcc975d4b0d607ba">depthArraySize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size of the <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470" title="Array used to get the depth of the particles created at this frame or the depth of...">depthArray</a> array.  <a href="#ac62e59e1479d21afdcc975d4b0d607ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470">depthArray</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Array used to get the depth of the particles created at this frame or the depth of all the pixels of the depth buffer.  <a href="#aeebd80ae1dd56ba1a53d734d7ac8d470"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; FrameBuffer &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a700e502d3acb71ef2580161c17b1c552">frameBuffer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Framebuffer in which to execute the <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a> program.  <a href="#a700e502d3acb71ef2580161c17b1c552"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Mesh&lt; vec3f, unsigned int &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a09405ef66c642807c6b181be139bbeed">mesh</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mesh used to retrieve depths with the <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a> program.  <a href="#a09405ef66c642807c6b181be139bbeed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; UniformSampler &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a08a0cf83a96f37f2e8367e3b6a126d5f">depthTextureU</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sampler uniform to access the depthTexture texture.  <a href="#a08a0cf83a96f37f2e8367e3b6a126d5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Uniform3f &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#adeca0d8b20d796d1438c4c33c7729819">sizeU</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Viewport width and height, plus width of the framebuffer viewport.  <a href="#adeca0d8b20d796d1438c4c33c7729819"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a5d378d1f1d91aa345975573914f8e631">useOffscreenDepthBuffer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if the user provides an offscreen depthbuffer.  <a href="#a5d378d1f1d91aa345975573914f8e631"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1WorldParticleLayer.html">WorldParticleLayer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#ac8bdc8568a8f37c19f9d7e78b3f5d0f8">worldLayer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The layer managing the particles in world space.  <a href="#ac8bdc8568a8f37c19f9d7e78b3f5d0f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1LifeCycleParticleLayer.html">LifeCycleParticleLayer</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a9d337991d80c706b058a5423fcdb7a6f">lifeCycleLayer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The layer managing the particles life cycle.  <a href="#a9d337991d80c706b058a5423fcdb7a6f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static static_ptr&lt; Program &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b">packer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Program used to get the depths of a set of particles.  <a href="#a5b4f13767ea45bbdf1d21d74ee94bf0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static static_ptr&lt; Texture2D &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ScreenParticleLayer.html#a1032328294dea097d4fd6f4ba59b54bb">depthBuffer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A copy of the depth buffer in the form of a texture.  <a href="#a1032328294dea097d4fd6f4ba59b54bb"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A <a class="el" href="classproland_1_1ParticleLayer.html" title="An abstract layer for a ParticleProducer.">ParticleLayer</a> to force particles to stay in the viewport, with a uniform density. </p>
<p>This layer requires particles initially managed in world space, using a <a class="el" href="classproland_1_1WorldParticleLayer.html" title="A ParticleLayer to manage particles in world space.">WorldParticleLayer</a>. It then forces these particles to stay in the framebuffer viewport. For that it deletes particles that project outside the viewport, and creates new particles in this viewport to maintain a constant density of particles. In fact particles are not really deleted, but forced to fading out. This requires a <a class="el" href="classproland_1_1LifeCycleParticleLayer.html" title="A ParticleLayer to manage the lifecycle of particles.">LifeCycleParticleLayer</a>.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Antoine Begault, Guillaume Piolat </dd></dl>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a3d8662c34822021205114968da817ca8"></a><!-- doxytag: member="proland::ScreenParticleLayer::status" ref="a3d8662c34822021205114968da817ca8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classproland_1_1ScreenParticleLayer.html#a3d8662c34822021205114968da817ca8">proland::ScreenParticleLayer::status</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The reason why a particle is fading out. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a3d8662c34822021205114968da817ca8a6a1d01cc63ce3b14a3d06ff50d43c8cc"></a><!-- doxytag: member="AGE" ref="a3d8662c34822021205114968da817ca8a6a1d01cc63ce3b14a3d06ff50d43c8cc" args="" -->AGE</em>&nbsp;</td><td>
<p>the particle reached its maximum age </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a3d8662c34822021205114968da817ca8afdf44368e2debefa5dbab94c5fcf58e1"></a><!-- doxytag: member="OUTSIDE_VIEWPORT" ref="a3d8662c34822021205114968da817ca8afdf44368e2debefa5dbab94c5fcf58e1" args="" -->OUTSIDE_VIEWPORT</em>&nbsp;</td><td>
<p>the particle projected outside the viewport </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a3d8662c34822021205114968da817ca8a8a33c93d50c8cb9b885aae7210a741d0"></a><!-- doxytag: member="POISSON_DISK" ref="a3d8662c34822021205114968da817ca8a8a33c93d50c8cb9b885aae7210a741d0" args="" -->POISSON_DISK</em>&nbsp;</td><td>
<p>the particle was too close to other particles </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8ae2c39ec7697a66de43920b44a8efe9"></a><!-- doxytag: member="proland::ScreenParticleLayer::ScreenParticleLayer" ref="a8ae2c39ec7697a66de43920b44a8efe9" args="(float radius, ptr&lt; Texture2D &gt; offscreenDepthBuffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ScreenParticleLayer::ScreenParticleLayer </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Texture2D &gt;&nbsp;</td>
          <td class="paramname"> <em>offscreenDepthBuffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>radius</em>&nbsp;</td><td>the radius of each particle, in pixels. This radius is used as a Poisson-disk radius for maintaining a Poisson distribution of particles in screen space. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offscreenDepthBuffer</em>&nbsp;</td><td>the offscreen buffer that contains depth. This texture is used to avoid copying the depth buffer at each frame. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0594a176549ea51972a277b2513e1ba0"></a><!-- doxytag: member="proland::ScreenParticleLayer::~ScreenParticleLayer" ref="a0594a176549ea51972a277b2513e1ba0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual proland::ScreenParticleLayer::~ScreenParticleLayer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes this <a class="el" href="classproland_1_1LifeCycleParticleLayer.html" title="A ParticleLayer to manage the lifecycle of particles.">LifeCycleParticleLayer</a>. </p>

</div>
</div>
<a class="anchor" id="a29179f49211d7dc0416a8b00b01b6bd7"></a><!-- doxytag: member="proland::ScreenParticleLayer::ScreenParticleLayer" ref="a29179f49211d7dc0416a8b00b01b6bd7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ScreenParticleLayer::ScreenParticleLayer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates an uninitialized <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac602d294ada65e352f37015a9fefd704"></a><!-- doxytag: member="proland::ScreenParticleLayer::addNewParticles" ref="ac602d294ada65e352f37015a9fefd704" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::ScreenParticleLayer::addNewParticles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds new particles. </p>
<p>The default implementation of this method does nothing. </p>

<p>Reimplemented from <a class="el" href="classproland_1_1ParticleLayer.html#af7c12de4950aa6f072f2b56291d89961">proland::ParticleLayer</a>.</p>

</div>
</div>
<a class="anchor" id="a05de4d0947e5ab3d3a35c1f5468b4455"></a><!-- doxytag: member="proland::ScreenParticleLayer::findNeighborRanges" ref="a05de4d0947e5ab3d3a35c1f5468b4455" args="(ScreenParticle *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ScreenParticleLayer::findNeighborRanges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates <a class="el" href="classproland_1_1ScreenParticleLayer.html#a2c8c4148d2efc2a7cd73a24f57b3e33a" title="Data structure used to find where to create new particles, so that they form a Poisson-disk...">ranges</a> based on the neighbors of the given particle. </p>

</div>
</div>
<a class="anchor" id="a698c9a05048846905a9f72ec53ebccf9"></a><!-- doxytag: member="proland::ScreenParticleLayer::getNeighbors" ref="a698c9a05048846905a9f72ec53ebccf9" args="(ScreenParticle *s, int &amp;n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a>** proland::ScreenParticleLayer::getNeighbors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the neighbors of the given screen particle. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>a screen particle. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>n</em>&nbsp;</td><td>the number of neighbors of s. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the neighbors of s. </dd></dl>

</div>
</div>
<a class="anchor" id="a111f895f9c65ce91293c0b0c825d5216"></a><!-- doxytag: member="proland::ScreenParticleLayer::getParticleDepths" ref="a111f895f9c65ce91293c0b0c825d5216" args="(const vector&lt; ScreenParticle * &gt; &amp;particles)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ScreenParticleLayer::getParticleDepths </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>particles</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the depths of the given particles from the depth buffer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>particles</em>&nbsp;</td><td>a list of particles. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a83a9d526847c9dca71025dbe44393b69"></a><!-- doxytag: member="proland::ScreenParticleLayer::getParticleRadius" ref="a83a9d526847c9dca71025dbe44393b69" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float proland::ScreenParticleLayer::getParticleRadius </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the Poisson-disk radius of each particle, in pixels. </p>

</div>
</div>
<a class="anchor" id="abb105879685b36a7e888595fa8cf0114"></a><!-- doxytag: member="proland::ScreenParticleLayer::getScreenParticle" ref="abb105879685b36a7e888595fa8cf0114" args="(ParticleStorage::Particle *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a>* proland::ScreenParticleLayer::getScreenParticle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">ParticleStorage::Particle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the screen space specific data of the given particle. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>a particle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a64b25eb06300fae33519bbca8a3adeba"></a><!-- doxytag: member="proland::ScreenParticleLayer::init" ref="a64b25eb06300fae33519bbca8a3adeba" args="(float radius, ptr&lt; Texture2D &gt; offscreenDepthBuffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ScreenParticleLayer::init </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Texture2D &gt;&nbsp;</td>
          <td class="paramname"> <em>offscreenDepthBuffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this <a class="el" href="classproland_1_1ScreenParticleLayer.html" title="A ParticleLayer to force particles to stay in the viewport, with a uniform density...">ScreenParticleLayer</a>. </p>
<p>See <a class="el" href="classproland_1_1ScreenParticleLayer.html#a8ae2c39ec7697a66de43920b44a8efe9" title="Creates a new ScreenParticleLayer.">ScreenParticleLayer</a>. </p>

</div>
</div>
<a class="anchor" id="a8309e8e82bd0084b1e50124dca9bc6b5"></a><!-- doxytag: member="proland::ScreenParticleLayer::initialize" ref="a8309e8e82bd0084b1e50124dca9bc6b5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::ScreenParticleLayer::initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this <a class="el" href="classproland_1_1ParticleLayer.html" title="An abstract layer for a ParticleProducer.">ParticleLayer</a>. </p>
<p>If this layer needs reference to other layers it can initialize them in this method (using the template method <a class="el" href="classproland_1_1ParticleProducer.html#a3b4cdf763803bb485cd2bfa028808856" title="Returns the layer of this producer whose index is given.">ParticleProducer::getLayer()</a>). The default implementation of this method does nothing. </p>

<p>Reimplemented from <a class="el" href="classproland_1_1ParticleLayer.html#a2468b4dbd3a36a3344acce47afd18dcb">proland::ParticleLayer</a>.</p>

</div>
</div>
<a class="anchor" id="aec38562f78c78d6e1632483aa21cff3a"></a><!-- doxytag: member="proland::ScreenParticleLayer::initParticle" ref="aec38562f78c78d6e1632483aa21cff3a" args="(ParticleStorage::Particle *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::ScreenParticleLayer::initParticle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1ParticleStorage_1_1Particle.html">ParticleStorage::Particle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the data that is specific to this layer in the given particle. </p>
<p>The default implementation of this method does nothing. </p>

<p>Reimplemented from <a class="el" href="classproland_1_1ParticleLayer.html#a192d8d4d4fa77cb65256ede822b7e549">proland::ParticleLayer</a>.</p>

</div>
</div>
<a class="anchor" id="a83477bc6ab222c2b90031bed5d11f09e"></a><!-- doxytag: member="proland::ScreenParticleLayer::moveParticles" ref="a83477bc6ab222c2b90031bed5d11f09e" args="(double dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::ScreenParticleLayer::moveParticles </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>dt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Moves the existing particles. </p>
<p>The default implementation of this method does nothing.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>the elapsed time since the last call to this method, in microseconds. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproland_1_1ParticleLayer.html#ac4919d1be6b9f8c331c8105bfd2b3311">proland::ParticleLayer</a>.</p>

</div>
</div>
<a class="anchor" id="a6433f8e3d4dcaf71718d2df677b2d129"></a><!-- doxytag: member="proland::ScreenParticleLayer::newScreenParticle" ref="a6433f8e3d4dcaf71718d2df677b2d129" args="(const vec2f &amp;pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticle</a>* proland::ScreenParticleLayer::newScreenParticle </td>
          <td>(</td>
          <td class="paramtype">const vec2f &amp;&nbsp;</td>
          <td class="paramname"> <em>pos</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new particle at the given position, and adds it to <a class="el" href="classproland_1_1ScreenParticleLayer.html#a01d6a23849e1f2d2c433e6a563a991f1" title="A ParticleGrid to store particles according to their screen position.">grid</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>a position in screen space, in pixels. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the created particle, or NULL if the maximum capacity of the particles storage was reached. </dd></dl>

</div>
</div>
<a class="anchor" id="a691476aaa68718e6f5d2f9d9382edd16"></a><!-- doxytag: member="proland::ScreenParticleLayer::removeOldParticles" ref="a691476aaa68718e6f5d2f9d9382edd16" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proland::ScreenParticleLayer::removeOldParticles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes old particles. </p>
<p>The default implementation of this method does nothing. </p>

<p>Reimplemented from <a class="el" href="classproland_1_1ParticleLayer.html#a511f0a941e7a0d4c94ac856b54ad435b">proland::ParticleLayer</a>.</p>

</div>
</div>
<a class="anchor" id="a100afc8f120ecf1b324d2b71cfe7d53e"></a><!-- doxytag: member="proland::ScreenParticleLayer::setParticleRadius" ref="a100afc8f120ecf1b324d2b71cfe7d53e" args="(float radius)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ScreenParticleLayer::setParticleRadius </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>radius</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the Poisson-disk radius of each particle, in pixels. </p>

</div>
</div>
<a class="anchor" id="aa241be68f327cf371aba0167dd5b4975"></a><!-- doxytag: member="proland::ScreenParticleLayer::setSceneManager" ref="aa241be68f327cf371aba0167dd5b4975" args="(SceneManager *manager)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ScreenParticleLayer::setSceneManager </td>
          <td>(</td>
          <td class="paramtype">SceneManager *&nbsp;</td>
          <td class="paramname"> <em>manager</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the scene manager used to set the world to screen transformation. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a202a70b2b9f147de293100490de9acb7"></a><!-- doxytag: member="proland::ScreenParticleLayer::bounds" ref="a202a70b2b9f147de293100490de9acb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">box2f <a class="el" href="classproland_1_1ScreenParticleLayer.html#a202a70b2b9f147de293100490de9acb7">proland::ScreenParticleLayer::bounds</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The current bounds of the viewport, in pixels. </p>
<p>Particles are forced to stay in this viewport by this particle layer. </p>

</div>
</div>
<a class="anchor" id="aeebd80ae1dd56ba1a53d734d7ac8d470"></a><!-- doxytag: member="proland::ScreenParticleLayer::depthArray" ref="aeebd80ae1dd56ba1a53d734d7ac8d470" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float* <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470">proland::ScreenParticleLayer::depthArray</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Array used to get the depth of the particles created at this frame or the depth of all the pixels of the depth buffer. </p>

</div>
</div>
<a class="anchor" id="ac62e59e1479d21afdcc975d4b0d607ba"></a><!-- doxytag: member="proland::ScreenParticleLayer::depthArraySize" ref="ac62e59e1479d21afdcc975d4b0d607ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1ScreenParticleLayer.html#ac62e59e1479d21afdcc975d4b0d607ba">proland::ScreenParticleLayer::depthArraySize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The size of the <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470" title="Array used to get the depth of the particles created at this frame or the depth of...">depthArray</a> array. </p>

</div>
</div>
<a class="anchor" id="a1032328294dea097d4fd6f4ba59b54bb"></a><!-- doxytag: member="proland::ScreenParticleLayer::depthBuffer" ref="a1032328294dea097d4fd6f4ba59b54bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static_ptr&lt;Texture2D&gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#a1032328294dea097d4fd6f4ba59b54bb">proland::ScreenParticleLayer::depthBuffer</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A copy of the depth buffer in the form of a texture. </p>
<p>This texture is needed by the <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a> program to access the depth of arbitrary pixels in the depth buffer. </p>

</div>
</div>
<a class="anchor" id="a4686f0dd24906b6539d740caa68bcdae"></a><!-- doxytag: member="proland::ScreenParticleLayer::depthBufferRead" ref="a4686f0dd24906b6539d740caa68bcdae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classproland_1_1ScreenParticleLayer.html#a4686f0dd24906b6539d740caa68bcdae">proland::ScreenParticleLayer::depthBufferRead</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if the camera is not moving, and if the depth buffer has been read into <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470" title="Array used to get the depth of the particles created at this frame or the depth of...">depthArray</a>. </p>

</div>
</div>
<a class="anchor" id="a08a0cf83a96f37f2e8367e3b6a126d5f"></a><!-- doxytag: member="proland::ScreenParticleLayer::depthTextureU" ref="a08a0cf83a96f37f2e8367e3b6a126d5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;UniformSampler&gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#a08a0cf83a96f37f2e8367e3b6a126d5f">proland::ScreenParticleLayer::depthTextureU</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sampler uniform to access the depthTexture texture. </p>

</div>
</div>
<a class="anchor" id="a700e502d3acb71ef2580161c17b1c552"></a><!-- doxytag: member="proland::ScreenParticleLayer::frameBuffer" ref="a700e502d3acb71ef2580161c17b1c552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;FrameBuffer&gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#a700e502d3acb71ef2580161c17b1c552">proland::ScreenParticleLayer::frameBuffer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Framebuffer in which to execute the <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a> program. </p>
<p>This framebuffer uses as color attachment a texture containing the depths read by <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a>, which are then read back in <a class="el" href="classproland_1_1ScreenParticleLayer.html#aeebd80ae1dd56ba1a53d734d7ac8d470" title="Array used to get the depth of the particles created at this frame or the depth of...">depthArray</a>. </p>

</div>
</div>
<a class="anchor" id="a01d6a23849e1f2d2c433e6a563a991f1"></a><!-- doxytag: member="proland::ScreenParticleLayer::grid" ref="a01d6a23849e1f2d2c433e6a563a991f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1ParticleGrid.html">ParticleGrid</a>* <a class="el" href="classproland_1_1ScreenParticleLayer.html#a01d6a23849e1f2d2c433e6a563a991f1">proland::ScreenParticleLayer::grid</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a> to store particles according to their screen position. </p>
<p>This grid is necessary to quickly find the neighbors of particles, which are themselves needed to maintain a Poisson-disk distribution. </p>

</div>
</div>
<a class="anchor" id="a5723280e55af4ebe6da1bc869d7445b7"></a><!-- doxytag: member="proland::ScreenParticleLayer::lastViewport" ref="a5723280e55af4ebe6da1bc869d7445b7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec4i <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5723280e55af4ebe6da1bc869d7445b7">proland::ScreenParticleLayer::lastViewport</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The viewport of the last frame. </p>
<p>Used to determine if the camera moved at this frame. </p>

</div>
</div>
<a class="anchor" id="af119e02199bebcb49180d7f7f8ee7814"></a><!-- doxytag: member="proland::ScreenParticleLayer::lastWorldToScreen" ref="af119e02199bebcb49180d7f7f8ee7814" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mat4d <a class="el" href="classproland_1_1ScreenParticleLayer.html#af119e02199bebcb49180d7f7f8ee7814">proland::ScreenParticleLayer::lastWorldToScreen</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The world to screen transformation of the last frame. </p>
<p>Used to determine if the camera moved at this frame. </p>

</div>
</div>
<a class="anchor" id="a9d337991d80c706b058a5423fcdb7a6f"></a><!-- doxytag: member="proland::ScreenParticleLayer::lifeCycleLayer" ref="a9d337991d80c706b058a5423fcdb7a6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1LifeCycleParticleLayer.html">LifeCycleParticleLayer</a>* <a class="el" href="classproland_1_1ScreenParticleLayer.html#a9d337991d80c706b058a5423fcdb7a6f">proland::ScreenParticleLayer::lifeCycleLayer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The layer managing the particles life cycle. </p>

</div>
</div>
<a class="anchor" id="a09405ef66c642807c6b181be139bbeed"></a><!-- doxytag: member="proland::ScreenParticleLayer::mesh" ref="a09405ef66c642807c6b181be139bbeed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt; Mesh&lt;vec3f, unsigned int&gt; &gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#a09405ef66c642807c6b181be139bbeed">proland::ScreenParticleLayer::mesh</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mesh used to retrieve depths with the <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b" title="Program used to get the depths of a set of particles.">packer</a> program. </p>
<p>This point mesh contains one point per particle. Each point contains the screen coordinates of a particle, and the index of this particle. </p>

</div>
</div>
<a class="anchor" id="a5b4f13767ea45bbdf1d21d74ee94bf0b"></a><!-- doxytag: member="proland::ScreenParticleLayer::packer" ref="a5b4f13767ea45bbdf1d21d74ee94bf0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static_ptr&lt;Program&gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5b4f13767ea45bbdf1d21d74ee94bf0b">proland::ScreenParticleLayer::packer</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Program used to get the depths of a set of particles. </p>

</div>
</div>
<a class="anchor" id="a093427a709c98d4b976746d1b96bc8b2"></a><!-- doxytag: member="proland::ScreenParticleLayer::radius" ref="a093427a709c98d4b976746d1b96bc8b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classproland_1_1ScreenParticleLayer.html#a093427a709c98d4b976746d1b96bc8b2">proland::ScreenParticleLayer::radius</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The Poisson-disk radius of each particle, in pixels. </p>

</div>
</div>
<a class="anchor" id="a2c8c4148d2efc2a7cd73a24f57b3e33a"></a><!-- doxytag: member="proland::ScreenParticleLayer::ranges" ref="a2c8c4148d2efc2a7cd73a24f57b3e33a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RangeList* <a class="el" href="classproland_1_1ScreenParticleLayer.html#a2c8c4148d2efc2a7cd73a24f57b3e33a">proland::ScreenParticleLayer::ranges</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Data structure used to find where to create new particles, so that they form a Poisson-disk distribution. </p>

</div>
</div>
<a class="anchor" id="a232a5af389c532f25417d62b293209a2"></a><!-- doxytag: member="proland::ScreenParticleLayer::scene" ref="a232a5af389c532f25417d62b293209a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SceneManager* <a class="el" href="classproland_1_1ScreenParticleLayer.html#a232a5af389c532f25417d62b293209a2">proland::ScreenParticleLayer::scene</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The scene manager, used to get the world to screen transformation. </p>

</div>
</div>
<a class="anchor" id="adeca0d8b20d796d1438c4c33c7729819"></a><!-- doxytag: member="proland::ScreenParticleLayer::sizeU" ref="adeca0d8b20d796d1438c4c33c7729819" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Uniform3f&gt; <a class="el" href="classproland_1_1ScreenParticleLayer.html#adeca0d8b20d796d1438c4c33c7729819">proland::ScreenParticleLayer::sizeU</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Viewport width and height, plus width of the framebuffer viewport. </p>

</div>
</div>
<a class="anchor" id="a5d378d1f1d91aa345975573914f8e631"></a><!-- doxytag: member="proland::ScreenParticleLayer::useOffscreenDepthBuffer" ref="a5d378d1f1d91aa345975573914f8e631" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classproland_1_1ScreenParticleLayer.html#a5d378d1f1d91aa345975573914f8e631">proland::ScreenParticleLayer::useOffscreenDepthBuffer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if the user provides an offscreen depthbuffer. </p>
<p>This allows to not copy the depthbuffer before reading from it. </p>

</div>
</div>
<a class="anchor" id="ac8bdc8568a8f37c19f9d7e78b3f5d0f8"></a><!-- doxytag: member="proland::ScreenParticleLayer::worldLayer" ref="ac8bdc8568a8f37c19f9d7e78b3f5d0f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1WorldParticleLayer.html">WorldParticleLayer</a>* <a class="el" href="classproland_1_1ScreenParticleLayer.html#ac8bdc8568a8f37c19f9d7e78b3f5d0f8">proland::ScreenParticleLayer::worldLayer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The layer managing the particles in world space. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat May 12 09:41:37 2012 for proland by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
