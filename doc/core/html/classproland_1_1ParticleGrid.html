<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>proland: proland::ParticleGrid Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>proland</b>::<a class="el" href="classproland_1_1ParticleGrid.html">ParticleGrid</a>
  </div>
</div>
<div class="contents">
<h1>proland::ParticleGrid Class Reference<br/>
<small>
[<a class="el" href="group__screen.html">screen</a>]</small>
</h1><!-- doxytag: class="proland::ParticleGrid" -->
<p>A 2D grid containing particles, used to quickly find the neighbors of a particle or the particles covering a given point.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ParticleGrid.h&gt;</code></p>

<p><a href="classproland_1_1ParticleGrid-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a13bf61ad921d042bb7222d16a2a0de26">ParticleGrid</a> (float <a class="el" href="classproland_1_1ParticleGrid.html#a1afbe3d787aa0c88ac2625e72f647674">radius</a>, int <a class="el" href="classproland_1_1ParticleGrid.html#a5ed3458efe429f916c24cd7d8deffadc">maxParticlesPerCell</a>, float <a class="el" href="classproland_1_1ParticleGrid.html#a6e2f7f6707d0bb7879be0bb03c1978d1">gridFactor</a>=1.0f)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a>.  <a href="#a13bf61ad921d042bb7222d16a2a0de26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#abdca4ce11d69be66bbaa505c391e7639">~ParticleGrid</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes this <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a>.  <a href="#abdca4ce11d69be66bbaa505c391e7639"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#ad52c445bd4f2338f907e39a3e8363880">getParticleRadius</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the radius of each particle.  <a href="#ad52c445bd4f2338f907e39a3e8363880"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a4d772ba41dc3f2261e99578cd4795ef3">setParticleRadius</a> (float <a class="el" href="classproland_1_1ParticleGrid.html#a1afbe3d787aa0c88ac2625e72f647674">radius</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the radius of each particle.  <a href="#a4d772ba41dc3f2261e99578cd4795ef3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#ad48121a9e6e7a22929f90492fcbd16fc">getMaxParticlesPerCell</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the maximum number of particles per cell.  <a href="#ad48121a9e6e7a22929f90492fcbd16fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a0ba41297b4f49e8379f48c826cc79c15">setMaxParticlesPerCell</a> (int <a class="el" href="classproland_1_1ParticleGrid.html#a5ed3458efe429f916c24cd7d8deffadc">maxParticlesPerCell</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the maximum number of particles per cell.  <a href="#a0ba41297b4f49e8379f48c826cc79c15"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">box2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#af2ad9c315f86aa7f1f319612a174d157">getViewport</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the viewport covered by this grid.  <a href="#af2ad9c315f86aa7f1f319612a174d157"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a3e79733006477b16ddf5fcd8649129a4">setViewport</a> (const box2i &amp;<a class="el" href="classproland_1_1ParticleGrid.html#a8af125aa91dd3dde0f0f4c99dce928ab">viewport</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the viewport that should be covered by this grid.  <a href="#a3e79733006477b16ddf5fcd8649129a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a05b3d631c8728057234b35e2b47c9f07">getGridSize</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of columns and rows of the grid.  <a href="#a05b3d631c8728057234b35e2b47c9f07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a00107982dd8dfdcb6f58e8ec8fa43afd">getCell</a> (const vec2f &amp;p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the grid cell coordinates corresponding to the given point.  <a href="#a00107982dd8dfdcb6f58e8ec8fa43afd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#aa94741db1dbe58e5dcfef97744c918fe">getCellSize</a> (const vec2i &amp;cell)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of particles in the given cell.  <a href="#aa94741db1dbe58e5dcfef97744c918fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#ae1e10894ef72e04763d920430b686429">getCellContent</a> (const vec2i &amp;cell)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the particles in the given cell.  <a href="#ae1e10894ef72e04763d920430b686429"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a27d8041c697b0eb2c20c7c0d75b87ed9">addParticle</a> (<a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a> *p, float intensity)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a particle to this grid.  <a href="#a27d8041c697b0eb2c20c7c0d75b87ed9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#ab09c12369342b57804eadd826161cad0">clear</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes all the particles from the grid.  <a href="#ab09c12369342b57804eadd826161cad0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Texture2D &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#af2cd85666dbef1e97e8c1cb0c9ffe970">copyToTexture</a> (ptr&lt; <a class="el" href="classproland_1_1ScreenParticleLayer.html">ScreenParticleLayer</a> &gt; l, ptr&lt; Texture2D &gt; t, int &amp;pixelsPerCell)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies the content of this <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a> to the given texture.  <a href="#af2cd85666dbef1e97e8c1cb0c9ffe970"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a88fe569d8f93f1b135d84ed838ed0eb9">createGrid</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates the grid for the current viewport and particle radius.  <a href="#a88fe569d8f93f1b135d84ed838ed0eb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a0b689d8e60974b9fcdb205d0159e01c2">deleteGrid</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes the grid.  <a href="#a0b689d8e60974b9fcdb205d0159e01c2"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a1afbe3d787aa0c88ac2625e72f647674">radius</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The radius of each particle, in pixels.  <a href="#a1afbe3d787aa0c88ac2625e72f647674"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a5ed3458efe429f916c24cd7d8deffadc">maxParticlesPerCell</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum number of particles per grid cell.  <a href="#a5ed3458efe429f916c24cd7d8deffadc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">box2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a8af125aa91dd3dde0f0f4c99dce928ab">viewport</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The viewport covered by this particle grid, in pixels.  <a href="#a8af125aa91dd3dde0f0f4c99dce928ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a44e1b423d2c6be2eface83dc6404d05f">gridSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of columns and rows of the particle grid.  <a href="#a44e1b423d2c6be2eface83dc6404d05f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vec2i&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a580bd7f49359dd6eae2aa3d983c2a580">cellGridSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of columns and rows of the particle grid sent to the GPU.  <a href="#a580bd7f49359dd6eae2aa3d983c2a580"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a4bf47d11164a403e72a2852e6accb31a">cellSizes</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of particles in each grid cell.  <a href="#a4bf47d11164a403e72a2852e6accb31a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#aefbf75da0be3a3cc8abe4dc805b4a514">cellContents</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The particles in each grid cell.  <a href="#aefbf75da0be3a3cc8abe4dc805b4a514"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a64e33a221a3191d936f62573a51443ed">cellIndexes</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The indexes of the particles in each gpu grid cell.  <a href="#a64e33a221a3191d936f62573a51443ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1ParticleGrid.html#a6e2f7f6707d0bb7879be0bb03c1978d1">gridFactor</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Factor for the grid size, if required to be different to the specified one.  <a href="#a6e2f7f6707d0bb7879be0bb03c1978d1"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A 2D grid containing particles, used to quickly find the neighbors of a particle or the particles covering a given point. </p>
<p>Each cell of the grid contains the particles that cover this cell (based on the screen particle position and a specified particle radius, all in pixels). The cell size is set approximatively to the particle radius. The grid covers a specified viewport (in pixels), and its cells are recomputed when this viewport changes (so that the size of each cell stays approximatively equal to the particle radius, in pixels). This class can also copy this grid in a GPU texture.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Antoine Begault </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a13bf61ad921d042bb7222d16a2a0de26"></a><!-- doxytag: member="proland::ParticleGrid::ParticleGrid" ref="a13bf61ad921d042bb7222d16a2a0de26" args="(float radius, int maxParticlesPerCell, float gridFactor=1.0f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ParticleGrid::ParticleGrid </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxParticlesPerCell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>gridFactor</em> = <code>1.0f</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>radius</em>&nbsp;</td><td>the radius of each particle. A particle is added to each cell covered by its radius. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxParticlesPerCell</em>&nbsp;</td><td>maximum number of particles per grid cell. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gridFactor</em>&nbsp;</td><td>factor for the grid size, if required to be different to the specified one. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abdca4ce11d69be66bbaa505c391e7639"></a><!-- doxytag: member="proland::ParticleGrid::~ParticleGrid" ref="abdca4ce11d69be66bbaa505c391e7639" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::ParticleGrid::~ParticleGrid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes this <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a>. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a27d8041c697b0eb2c20c7c0d75b87ed9"></a><!-- doxytag: member="proland::ParticleGrid::addParticle" ref="a27d8041c697b0eb2c20c7c0d75b87ed9" args="(ScreenParticleLayer::ScreenParticle *p, float intensity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::addParticle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a> *&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>intensity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a particle to this grid. </p>
<p>The particle is added to each cell covered by the disk of radius <a class="el" href="classproland_1_1ParticleGrid.html#ad52c445bd4f2338f907e39a3e8363880" title="Returns the radius of each particle.">getParticleRadius()</a> around the particle.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>a particle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab09c12369342b57804eadd826161cad0"></a><!-- doxytag: member="proland::ParticleGrid::clear" ref="ab09c12369342b57804eadd826161cad0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::clear </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all the particles from the grid. </p>

</div>
</div>
<a class="anchor" id="af2cd85666dbef1e97e8c1cb0c9ffe970"></a><!-- doxytag: member="proland::ParticleGrid::copyToTexture" ref="af2cd85666dbef1e97e8c1cb0c9ffe970" args="(ptr&lt; ScreenParticleLayer &gt; l, ptr&lt; Texture2D &gt; t, int &amp;pixelsPerCell)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Texture2D&gt; proland::ParticleGrid::copyToTexture </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1ScreenParticleLayer.html">ScreenParticleLayer</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Texture2D &gt;&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>pixelsPerCell</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Copies the content of this <a class="el" href="classproland_1_1ParticleGrid.html" title="A 2D grid containing particles, used to quickly find the neighbors of a particle...">ParticleGrid</a> to the given texture. </p>
<p>Each cell is represented with pixelsPerCell RGBA float values representing particle indexes. The cell particles are stored in the first pixels of the cell, and -1 is used to mark the end of the particle list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>l</em>&nbsp;</td><td>the layer managing the particles stored in this grid. This layer is used to compute the index of each particle via <a class="el" href="classproland_1_1ParticleStorage.html#afe1af2e325715fb799236ddfc927bfa1" title="Returns the index of the given particle.">ParticleStorage::getParticleIndex()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>the destination texture, or NULL to create a new one. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pixelsPerCell</em>&nbsp;</td><td>the number of pixels used to represent each cell in t. Equals to ceil(<a class="el" href="classproland_1_1ParticleGrid.html#ad48121a9e6e7a22929f90492fcbd16fc" title="Returns the maximum number of particles per cell.">getMaxParticlesPerCell()</a> / 4). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the given texture, or a new one if t was not of correct size. The size of the texture must be gridSize.x * pixelsPerCell times gridSize.y pixels. </dd></dl>

</div>
</div>
<a class="anchor" id="a88fe569d8f93f1b135d84ed838ed0eb9"></a><!-- doxytag: member="proland::ParticleGrid::createGrid" ref="a88fe569d8f93f1b135d84ed838ed0eb9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::createGrid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates the grid for the current viewport and particle radius. </p>

</div>
</div>
<a class="anchor" id="a0b689d8e60974b9fcdb205d0159e01c2"></a><!-- doxytag: member="proland::ParticleGrid::deleteGrid" ref="a0b689d8e60974b9fcdb205d0159e01c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::deleteGrid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes the grid. </p>

</div>
</div>
<a class="anchor" id="a00107982dd8dfdcb6f58e8ec8fa43afd"></a><!-- doxytag: member="proland::ParticleGrid::getCell" ref="a00107982dd8dfdcb6f58e8ec8fa43afd" args="(const vec2f &amp;p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec2i proland::ParticleGrid::getCell </td>
          <td>(</td>
          <td class="paramtype">const vec2f &amp;&nbsp;</td>
          <td class="paramname"> <em>p</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the grid cell coordinates corresponding to the given point. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>a point inside the viewport <a class="el" href="classproland_1_1ParticleGrid.html#af2ad9c315f86aa7f1f319612a174d157" title="Returns the viewport covered by this grid.">getViewport()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae1e10894ef72e04763d920430b686429"></a><!-- doxytag: member="proland::ParticleGrid::getCellContent" ref="ae1e10894ef72e04763d920430b686429" args="(const vec2i &amp;cell)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a>** proland::ParticleGrid::getCellContent </td>
          <td>(</td>
          <td class="paramtype">const vec2i &amp;&nbsp;</td>
          <td class="paramname"> <em>cell</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the particles in the given cell. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cell</em>&nbsp;</td><td>a cell given by its x and y coordinates (in number of columns and rows). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an array of <a class="el" href="classproland_1_1ParticleGrid.html#aa94741db1dbe58e5dcfef97744c918fe" title="Returns the number of particles in the given cell.">getCellSize()</a> particles. </dd></dl>

</div>
</div>
<a class="anchor" id="aa94741db1dbe58e5dcfef97744c918fe"></a><!-- doxytag: member="proland::ParticleGrid::getCellSize" ref="aa94741db1dbe58e5dcfef97744c918fe" args="(const vec2i &amp;cell)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::ParticleGrid::getCellSize </td>
          <td>(</td>
          <td class="paramtype">const vec2i &amp;&nbsp;</td>
          <td class="paramname"> <em>cell</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of particles in the given cell. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cell</em>&nbsp;</td><td>a cell given by its x and y coordinates (in number of columns and rows). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a05b3d631c8728057234b35e2b47c9f07"></a><!-- doxytag: member="proland::ParticleGrid::getGridSize" ref="a05b3d631c8728057234b35e2b47c9f07" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec2i proland::ParticleGrid::getGridSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of columns and rows of the grid. </p>

</div>
</div>
<a class="anchor" id="ad48121a9e6e7a22929f90492fcbd16fc"></a><!-- doxytag: member="proland::ParticleGrid::getMaxParticlesPerCell" ref="ad48121a9e6e7a22929f90492fcbd16fc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::ParticleGrid::getMaxParticlesPerCell </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the maximum number of particles per cell. </p>

</div>
</div>
<a class="anchor" id="ad52c445bd4f2338f907e39a3e8363880"></a><!-- doxytag: member="proland::ParticleGrid::getParticleRadius" ref="ad52c445bd4f2338f907e39a3e8363880" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float proland::ParticleGrid::getParticleRadius </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the radius of each particle. </p>

</div>
</div>
<a class="anchor" id="af2ad9c315f86aa7f1f319612a174d157"></a><!-- doxytag: member="proland::ParticleGrid::getViewport" ref="af2ad9c315f86aa7f1f319612a174d157" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">box2i proland::ParticleGrid::getViewport </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the viewport covered by this grid. </p>

</div>
</div>
<a class="anchor" id="a0ba41297b4f49e8379f48c826cc79c15"></a><!-- doxytag: member="proland::ParticleGrid::setMaxParticlesPerCell" ref="a0ba41297b4f49e8379f48c826cc79c15" args="(int maxParticlesPerCell)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::setMaxParticlesPerCell </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxParticlesPerCell</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the maximum number of particles per cell. </p>

</div>
</div>
<a class="anchor" id="a4d772ba41dc3f2261e99578cd4795ef3"></a><!-- doxytag: member="proland::ParticleGrid::setParticleRadius" ref="a4d772ba41dc3f2261e99578cd4795ef3" args="(float radius)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::setParticleRadius </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>radius</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the radius of each particle. </p>
<p>This clears the grid content. </p>

</div>
</div>
<a class="anchor" id="a3e79733006477b16ddf5fcd8649129a4"></a><!-- doxytag: member="proland::ParticleGrid::setViewport" ref="a3e79733006477b16ddf5fcd8649129a4" args="(const box2i &amp;viewport)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::ParticleGrid::setViewport </td>
          <td>(</td>
          <td class="paramtype">const box2i &amp;&nbsp;</td>
          <td class="paramname"> <em>viewport</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the viewport that should be covered by this grid. </p>
<p>This clears the grid content. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aefbf75da0be3a3cc8abe4dc805b4a514"></a><!-- doxytag: member="proland::ParticleGrid::cellContents" ref="aefbf75da0be3a3cc8abe4dc805b4a514" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproland_1_1ScreenParticleLayer_1_1ScreenParticle.html">ScreenParticleLayer::ScreenParticle</a>** <a class="el" href="classproland_1_1ParticleGrid.html#aefbf75da0be3a3cc8abe4dc805b4a514">proland::ParticleGrid::cellContents</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The particles in each grid cell. </p>
<p>This array is of size gridSize.x * gridSize.y * maxParticlesPerCell. </p>

</div>
</div>
<a class="anchor" id="a580bd7f49359dd6eae2aa3d983c2a580"></a><!-- doxytag: member="proland::ParticleGrid::cellGridSize" ref="a580bd7f49359dd6eae2aa3d983c2a580" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec2i <a class="el" href="classproland_1_1ParticleGrid.html#a580bd7f49359dd6eae2aa3d983c2a580">proland::ParticleGrid::cellGridSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of columns and rows of the particle grid sent to the GPU. </p>

</div>
</div>
<a class="anchor" id="a64e33a221a3191d936f62573a51443ed"></a><!-- doxytag: member="proland::ParticleGrid::cellIndexes" ref="a64e33a221a3191d936f62573a51443ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="classproland_1_1ParticleGrid.html#a64e33a221a3191d936f62573a51443ed">proland::ParticleGrid::cellIndexes</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The indexes of the particles in each gpu grid cell. </p>
<p>This array is of size gpuGridSize.x * gpuGridSize.y * maxParticlesPerGpuCell. </p>

</div>
</div>
<a class="anchor" id="a4bf47d11164a403e72a2852e6accb31a"></a><!-- doxytag: member="proland::ParticleGrid::cellSizes" ref="a4bf47d11164a403e72a2852e6accb31a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="classproland_1_1ParticleGrid.html#a4bf47d11164a403e72a2852e6accb31a">proland::ParticleGrid::cellSizes</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of particles in each grid cell. </p>
<p>This array is of size gridSize.x * gridSize.y. </p>

</div>
</div>
<a class="anchor" id="a6e2f7f6707d0bb7879be0bb03c1978d1"></a><!-- doxytag: member="proland::ParticleGrid::gridFactor" ref="a6e2f7f6707d0bb7879be0bb03c1978d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classproland_1_1ParticleGrid.html#a6e2f7f6707d0bb7879be0bb03c1978d1">proland::ParticleGrid::gridFactor</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Factor for the grid size, if required to be different to the specified one. </p>

</div>
</div>
<a class="anchor" id="a44e1b423d2c6be2eface83dc6404d05f"></a><!-- doxytag: member="proland::ParticleGrid::gridSize" ref="a44e1b423d2c6be2eface83dc6404d05f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vec2i <a class="el" href="classproland_1_1ParticleGrid.html#a44e1b423d2c6be2eface83dc6404d05f">proland::ParticleGrid::gridSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of columns and rows of the particle grid. </p>

</div>
</div>
<a class="anchor" id="a5ed3458efe429f916c24cd7d8deffadc"></a><!-- doxytag: member="proland::ParticleGrid::maxParticlesPerCell" ref="a5ed3458efe429f916c24cd7d8deffadc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1ParticleGrid.html#a5ed3458efe429f916c24cd7d8deffadc">proland::ParticleGrid::maxParticlesPerCell</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Maximum number of particles per grid cell. </p>

</div>
</div>
<a class="anchor" id="a1afbe3d787aa0c88ac2625e72f647674"></a><!-- doxytag: member="proland::ParticleGrid::radius" ref="a1afbe3d787aa0c88ac2625e72f647674" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classproland_1_1ParticleGrid.html#a1afbe3d787aa0c88ac2625e72f647674">proland::ParticleGrid::radius</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The radius of each particle, in pixels. </p>

</div>
</div>
<a class="anchor" id="a8af125aa91dd3dde0f0f4c99dce928ab"></a><!-- doxytag: member="proland::ParticleGrid::viewport" ref="a8af125aa91dd3dde0f0f4c99dce928ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">box2i <a class="el" href="classproland_1_1ParticleGrid.html#a8af125aa91dd3dde0f0f4c99dce928ab">proland::ParticleGrid::viewport</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The viewport covered by this particle grid, in pixels. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat May 12 09:41:37 2012 for proland by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
