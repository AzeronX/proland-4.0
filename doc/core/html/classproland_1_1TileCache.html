<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>proland: proland::TileCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>proland</b>::<a class="el" href="classproland_1_1TileCache.html">TileCache</a>
  </div>
</div>
<div class="contents">
<h1>proland::TileCache Class Reference<br/>
<small>
[<a class="el" href="group__producer.html">producer</a>]</small>
</h1><!-- doxytag: class="proland::TileCache" -->
<p>A cache of tiles to avoid recomputing recently produced tiles.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;TileCache.h&gt;</code></p>

<p><a href="classproland_1_1TileCache-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A tile described by its level,tx,ty coordinates.  <a href="classproland_1_1TileCache_1_1Tile.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a536c2ccb98a04ed0e142ce4e1cba2984">TileCache</a> (ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt; <a class="el" href="classproland_1_1TileCache.html#a2a6356586c04b42471c658350deaf3a8">storage</a>, std::string <a class="el" href="classproland_1_1TileCache.html#a4bbcc74b3a1a725cd5ecbb6125013cf7">name</a>, ptr&lt; Scheduler &gt; <a class="el" href="classproland_1_1TileCache.html#a9dee149080f33cf75ed4a421ec1f07f1">scheduler</a>=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#a536c2ccb98a04ed0e142ce4e1cba2984"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a834c7c1f0c128b3077f5a2647e60bbc4">~TileCache</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#a834c7c1f0c128b3077f5a2647e60bbc4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ac0bdf061c3aa26a8a2f42db9145b8e81">getStorage</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the storage used to store the actual tiles data.  <a href="#ac0bdf061c3aa26a8a2f42db9145b8e81"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Scheduler &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a14fce7c63a8289298d307a9d06018a9d">getScheduler</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the scheduler used to schedule prefetched tiles creation tasks.  <a href="#a14fce7c63a8289298d307a9d06018a9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a8c9f4e454249f65f262776d2a3fc35c2">getUsedTiles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of tiles currently in use in this cache.  <a href="#a8c9f4e454249f65f262776d2a3fc35c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#aa35d17cbb7ace9564a2cbb33302048ed">getUnusedTiles</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of tiles currently unused in this cache.  <a href="#aa35d17cbb7ace9564a2cbb33302048ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ad3c0723651bf4d027502ce401cac3a82">findTile</a> (int producerId, int level, int tx, int ty, bool includeCache=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Looks for a tile in this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#ad3c0723651bf4d027502ce401cac3a82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a14e66219b3fa0391a7e2015d9a6dc594">getTile</a> (int producerId, int level, int tx, int ty, unsigned int deadline, int *users=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the requested tile, creating it if necessary.  <a href="#a14e66219b3fa0391a7e2015d9a6dc594"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Task &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ae84e6971f4c52572a7c68472bbc58d61">prefetchTile</a> (int producerId, int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a prefetch task to create the given tile.  <a href="#ae84e6971f4c52572a7c68472bbc58d61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ae3c6986a83c7d71b2ab67f2e6259b7fb">putTile</a> (<a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> *t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decrements the number of users of this tile by one.  <a href="#ae3c6986a83c7d71b2ab67f2e6259b7fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a6724ba66d1f0922eae91f5625f9bffaf">invalidateTiles</a> (int producerId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invalidates the tiles from this cache produced by the given producer.  <a href="#a6724ba66d1f0922eae91f5625f9bffaf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a805951149c20778914ebf06a5cd012ae">invalidateTile</a> (int producerId, int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Invalidates the selected tile from this cache produced by the given producer.  <a href="#a805951149c20778914ebf06a5cd012ae"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a747a10d8e740baac1e32bcb8f1c1fc60">TileCache</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new uninitalized <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#a747a10d8e740baac1e32bcb8f1c1fc60"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a132e4562b9adc131be53d34914e1db0d">init</a> (ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt; <a class="el" href="classproland_1_1TileCache.html#a2a6356586c04b42471c658350deaf3a8">storage</a>, std::string <a class="el" href="classproland_1_1TileCache.html#a4bbcc74b3a1a725cd5ecbb6125013cf7">name</a>, ptr&lt; Scheduler &gt; <a class="el" href="classproland_1_1TileCache.html#a9dee149080f33cf75ed4a421ec1f07f1">scheduler</a>=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#a132e4562b9adc131be53d34914e1db0d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a4bbcc74b3a1a725cd5ecbb6125013cf7">name</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The name of this cache for debugging purpose.  <a href="#a4bbcc74b3a1a725cd5ecbb6125013cf7"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a28e684d9eed9e58a0e14b5dd8125a66f">createTileTaskDeleted</a> (int producerId, int level, int tx, int ty)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notifies this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> that a tile creation task has been deleted.  <a href="#a28e684d9eed9e58a0e14b5dd8125a66f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ab834771551d3571f9d718fa642881965">nextProducerId</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Next local identifier to be used for a <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a> using this cache.  <a href="#ab834771551d3571f9d718fa642881965"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">map&lt; int, <a class="el" href="classproland_1_1TileProducer.html">TileProducer</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#ada1c7ea60a28ca94e65509e39a359dff">producers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The producers that use this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>.  <a href="#ada1c7ea60a28ca94e65509e39a359dff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a2a6356586c04b42471c658350deaf3a8">storage</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The storage to store the tiles data.  <a href="#a2a6356586c04b42471c658350deaf3a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ptr&lt; Scheduler &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a9dee149080f33cf75ed4a421ec1f07f1">scheduler</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The scheduler to schedule prefetched tiles creation tasks, and to reschedule invalidated tiles creation tasks.  <a href="#a9dee149080f33cf75ed4a421ec1f07f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">map&lt; <a class="el" href="classproland_1_1TileCache_1_1Tile.html#a5163c613efa3ea1ee0a64b82ea097ac3">Tile::TId</a>, <a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a041aea3a69856b0783bbc8a816d2129a">usedTiles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The tiles currently in use.  <a href="#a041aea3a69856b0783bbc8a816d2129a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Cache&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a54cdd39ce5d84c6431cc0fc04259e819">unusedTiles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The unused tiles.  <a href="#a54cdd39ce5d84c6431cc0fc04259e819"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">list&lt; <a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a1820c6bf9e0cc8dabebcb9cfb0acf4ec">unusedTilesOrder</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The unused tiles, ordered by date of last use (to implement a LRU cache).  <a href="#a1820c6bf9e0cc8dabebcb9cfb0acf4ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">map&lt; <a class="el" href="classproland_1_1TileCache_1_1Tile.html#a5163c613efa3ea1ee0a64b82ea097ac3">Tile::TId</a>, Task * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#aa34e62c4e0cd7c83fe8f851857839a71">deletedTiles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The tasks to produce the data of deleted tiles.  <a href="#aa34e62c4e0cd7c83fe8f851857839a71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a047bc8694303b10023f75daa79fac365">queries</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of queries to this tile cache.  <a href="#a047bc8694303b10023f75daa79fac365"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#abcc41cc30b58d14fbd802e8671c445a2">misses</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of missed queries to this tile cache.  <a href="#abcc41cc30b58d14fbd802e8671c445a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproland_1_1TileCache.html#a77e7164fbd4cd0923bfde9895529aa82">mutex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A mutex to serialize parallel accesses to this cache.  <a href="#a77e7164fbd4cd0923bfde9895529aa82"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A cache of tiles to avoid recomputing recently produced tiles. </p>
<p>A tile cache keeps track of which tiles (identified by their level,tx,ty coordinates) are currently stored in an associated <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a>. It also keeps track of which tiles are in use, and which are not. Unused tiles are kept in the <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a> as long as possible, in order to avoid re creating them if they become needed again. But the storage associated with unused tiles can be reused to store other tiles at any moment (in this case we say that a tile is evicted from the cache of unused tiles). Conversely, the storage associated with tiles currently in use cannot be reaffected until these tiles become unused. A tile is in use when it is returned by <a class="el" href="classproland_1_1TileCache.html#a14e66219b3fa0391a7e2015d9a6dc594" title="Returns the requested tile, creating it if necessary.">getTile</a>, and becomes unused when <a class="el" href="classproland_1_1TileCache.html#ae3c6986a83c7d71b2ab67f2e6259b7fb" title="Decrements the number of users of this tile by one.">putTile</a> is called (more precisely when the number of users of this tile becomes 0, this number being incremented and decremented by <a class="el" href="classproland_1_1TileCache.html#a14e66219b3fa0391a7e2015d9a6dc594" title="Returns the requested tile, creating it if necessary.">getTile</a> and <a class="el" href="classproland_1_1TileCache.html#ae3c6986a83c7d71b2ab67f2e6259b7fb" title="Decrements the number of users of this tile by one.">putTile</a>, respectively). The tiles that are needed to render the current frame should be declared in use, so that they are not evicted between their creation and their actual rendering.</p>
<dl class="author"><dt><b>Authors:</b></dt><dd>Eric Bruneton, Antoine Begault, Guillaume Piolat </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a536c2ccb98a04ed0e142ce4e1cba2984"></a><!-- doxytag: member="proland::TileCache::TileCache" ref="a536c2ccb98a04ed0e142ce4e1cba2984" args="(ptr&lt; TileStorage &gt; storage, std::string name, ptr&lt; Scheduler &gt; scheduler=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::TileCache::TileCache </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Scheduler &gt;&nbsp;</td>
          <td class="paramname"> <em>scheduler</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>storage</em>&nbsp;</td><td>the tile storage to store the actual tiles data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>name of this cache, for logging. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scheduler</em>&nbsp;</td><td>an optional scheduler to schedule the creation of prefetched tiles. If no scheduler is specified, prefetch is disabled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a834c7c1f0c128b3077f5a2647e60bbc4"></a><!-- doxytag: member="proland::TileCache::~TileCache" ref="a834c7c1f0c128b3077f5a2647e60bbc4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual proland::TileCache::~TileCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>

</div>
</div>
<a class="anchor" id="a747a10d8e740baac1e32bcb8f1c1fc60"></a><!-- doxytag: member="proland::TileCache::TileCache" ref="a747a10d8e740baac1e32bcb8f1c1fc60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">proland::TileCache::TileCache </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new uninitalized <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a28e684d9eed9e58a0e14b5dd8125a66f"></a><!-- doxytag: member="proland::TileCache::createTileTaskDeleted" ref="a28e684d9eed9e58a0e14b5dd8125a66f" args="(int producerId, int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileCache::createTileTaskDeleted </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notifies this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a> that a tile creation task has been deleted. </p>

</div>
</div>
<a class="anchor" id="ad3c0723651bf4d027502ce401cac3a82"></a><!-- doxytag: member="proland::TileCache::findTile" ref="ad3c0723651bf4d027502ce401cac3a82" args="(int producerId, int level, int tx, int ty, bool includeCache=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a>* proland::TileCache::findTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>includeCache</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks for a tile in this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>producerId</em>&nbsp;</td><td>the id of the tile's producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>includeCache</em>&nbsp;</td><td>true to include both used and unused tiles in the search, false to include only the used tiles. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the requested tile, or NULL if it is not in this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. This method does not change the number of users of the returned tile. </dd></dl>

</div>
</div>
<a class="anchor" id="a14fce7c63a8289298d307a9d06018a9d"></a><!-- doxytag: member="proland::TileCache::getScheduler" ref="a14fce7c63a8289298d307a9d06018a9d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Scheduler&gt; proland::TileCache::getScheduler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the scheduler used to schedule prefetched tiles creation tasks. </p>

</div>
</div>
<a class="anchor" id="ac0bdf061c3aa26a8a2f42db9145b8e81"></a><!-- doxytag: member="proland::TileCache::getStorage" ref="ac0bdf061c3aa26a8a2f42db9145b8e81" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;<a class="el" href="classproland_1_1TileStorage.html">TileStorage</a>&gt; proland::TileCache::getStorage </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the storage used to store the actual tiles data. </p>

</div>
</div>
<a class="anchor" id="a14e66219b3fa0391a7e2015d9a6dc594"></a><!-- doxytag: member="proland::TileCache::getTile" ref="a14e66219b3fa0391a7e2015d9a6dc594" args="(int producerId, int level, int tx, int ty, unsigned int deadline, int *users=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a>* proland::TileCache::getTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>deadline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>users</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the requested tile, creating it if necessary. </p>
<p>If the tile is currently in use it is returned directly. If it is in cache but unused, it marked as used and returned. Otherwise a new tile is created, marked as used and returned. In all cases the number of users of this tile is incremented by one.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>producerId</em>&nbsp;</td><td>the id of the tile's producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>deadline</em>&nbsp;</td><td>the deadline at which the tile data must be ready. 0 means the current frame. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>the</em>&nbsp;</td><td>number of users of this tile, <em>before</em> it is incremented. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the requested tile, or NULL if there is no room left in the <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a> to store the requested tile. </dd></dl>

</div>
</div>
<a class="anchor" id="aa35d17cbb7ace9564a2cbb33302048ed"></a><!-- doxytag: member="proland::TileCache::getUnusedTiles" ref="aa35d17cbb7ace9564a2cbb33302048ed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::TileCache::getUnusedTiles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of tiles currently unused in this cache. </p>

</div>
</div>
<a class="anchor" id="a8c9f4e454249f65f262776d2a3fc35c2"></a><!-- doxytag: member="proland::TileCache::getUsedTiles" ref="a8c9f4e454249f65f262776d2a3fc35c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::TileCache::getUsedTiles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the number of tiles currently in use in this cache. </p>

</div>
</div>
<a class="anchor" id="a132e4562b9adc131be53d34914e1db0d"></a><!-- doxytag: member="proland::TileCache::init" ref="a132e4562b9adc131be53d34914e1db0d" args="(ptr&lt; TileStorage &gt; storage, std::string name, ptr&lt; Scheduler &gt; scheduler=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileCache::init </td>
          <td>(</td>
          <td class="paramtype">ptr&lt; <a class="el" href="classproland_1_1TileStorage.html">TileStorage</a> &gt;&nbsp;</td>
          <td class="paramname"> <em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ptr&lt; Scheduler &gt;&nbsp;</td>
          <td class="paramname"> <em>scheduler</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>storage</em>&nbsp;</td><td>the tile storage to store the actual tiles data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>name of this cache, for logging. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scheduler</em>&nbsp;</td><td>an optional scheduler to schedule the creation of prefetched tiles. If no scheduler is specified, prefetch is disabled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a805951149c20778914ebf06a5cd012ae"></a><!-- doxytag: member="proland::TileCache::invalidateTile" ref="a805951149c20778914ebf06a5cd012ae" args="(int producerId, int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileCache::invalidateTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates the selected tile from this cache produced by the given producer. </p>
<p>This means that the tasks to produce the actual data of this tile will be automatically reexecuted before the data can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>producerId</em>&nbsp;</td><td>the id of a producer using this cache. See <a class="el" href="classproland_1_1TileProducer.html#a3f80c42e6ef622730ebf0b35f37db909" title="Returns the id of this producer.">TileProducer::getId</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the level of a tile in the producer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the x coord of that tile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the y coord of that tile </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6724ba66d1f0922eae91f5625f9bffaf"></a><!-- doxytag: member="proland::TileCache::invalidateTiles" ref="a6724ba66d1f0922eae91f5625f9bffaf" args="(int producerId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proland::TileCache::invalidateTiles </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates the tiles from this cache produced by the given producer. </p>
<p>This means that the tasks to produce the actual data of these tiles will be automatically reexecuted before the data can be used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>producerId</em>&nbsp;</td><td>the id of a producer using this cache. See <a class="el" href="classproland_1_1TileProducer.html#a3f80c42e6ef622730ebf0b35f37db909" title="Returns the id of this producer.">TileProducer::getId</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae84e6971f4c52572a7c68472bbc58d61"></a><!-- doxytag: member="proland::TileCache::prefetchTile" ref="ae84e6971f4c52572a7c68472bbc58d61" args="(int producerId, int level, int tx, int ty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Task&gt; proland::TileCache::prefetchTile </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>producerId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a prefetch task to create the given tile. </p>
<p>If the requested tile is currently in use or in cache but unused, this method does nothing. Otherwise it gets an unused tile storage (evicting an unused tile if necessary), and then creates a task to produce the data of the requested tile, in this storage. This method must not be called if <a class="el" href="classproland_1_1TileCache.html#a14fce7c63a8289298d307a9d06018a9d" title="Returns the scheduler used to schedule prefetched tiles creation tasks.">getScheduler</a> returns NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>producerId</em>&nbsp;</td><td>the id of the tile's producer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>the tile's quadtree level. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>the tile's quadtree x coordinate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ty</em>&nbsp;</td><td>the tile's quadtree y coordinate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae3c6986a83c7d71b2ab67f2e6259b7fb"></a><!-- doxytag: member="proland::TileCache::putTile" ref="ae3c6986a83c7d71b2ab67f2e6259b7fb" args="(Tile *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int proland::TileCache::putTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrements the number of users of this tile by one. </p>
<p>If this number becomes 0 the tile is marked as unused, and so can be evicted from the cache at any moment.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>a tile currently in use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of users of this tile, <em>after</em> it has been decremented. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa34e62c4e0cd7c83fe8f851857839a71"></a><!-- doxytag: member="proland::TileCache::deletedTiles" ref="aa34e62c4e0cd7c83fe8f851857839a71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;<a class="el" href="classproland_1_1TileCache_1_1Tile.html#a5163c613efa3ea1ee0a64b82ea097ac3">Tile::TId</a>, Task*&gt; <a class="el" href="classproland_1_1TileCache.html#aa34e62c4e0cd7c83fe8f851857839a71">proland::TileCache::deletedTiles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The tasks to produce the data of deleted tiles. </p>
<p>When an unused tile is evicted from the cache it is destroyed, but its producer task may not be destroyed (if there remain some reference to it, for example via a task graph). If the tile is needed again, <a class="el" href="classproland_1_1TileCache.html#a14e66219b3fa0391a7e2015d9a6dc594" title="Returns the requested tile, creating it if necessary.">getTile</a> will create a new <a class="el" href="classproland_1_1TileCache_1_1Tile.html" title="A tile described by its level,tx,ty coordinates.">Tile</a>, which could produce a new producer task. Hence we could get two producer tasks for the same tile, which could lead to inconsistencies (the two tasks may not have the same execution state, may not use the same storage to store their result, etc). To avoid this problem we store the tasks of deleted tiles in this map, in order to reuse them if a deleted tile is needed again. When a producer task gets deleted, it removes itself from this map by calling <a class="el" href="classproland_1_1TileCache.html#a28e684d9eed9e58a0e14b5dd8125a66f" title="Notifies this TileCache that a tile creation task has been deleted.">createTileTaskDeleted</a> (because then it is not a problem to recreate a new Task, there will be no duplication). So the size of this map cannot grow unbounded. </p>

</div>
</div>
<a class="anchor" id="abcc41cc30b58d14fbd802e8671c445a2"></a><!-- doxytag: member="proland::TileCache::misses" ref="abcc41cc30b58d14fbd802e8671c445a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1TileCache.html#abcc41cc30b58d14fbd802e8671c445a2">proland::TileCache::misses</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of missed queries to this tile cache. </p>
<p>This is the number of times a tile was requested but not found in the cache, requiring to (re)create it. Only used for statistics. </p>

</div>
</div>
<a class="anchor" id="a77e7164fbd4cd0923bfde9895529aa82"></a><!-- doxytag: member="proland::TileCache::mutex" ref="a77e7164fbd4cd0923bfde9895529aa82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="classproland_1_1TileCache.html#a77e7164fbd4cd0923bfde9895529aa82">proland::TileCache::mutex</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A mutex to serialize parallel accesses to this cache. </p>

</div>
</div>
<a class="anchor" id="a4bbcc74b3a1a725cd5ecbb6125013cf7"></a><!-- doxytag: member="proland::TileCache::name" ref="a4bbcc74b3a1a725cd5ecbb6125013cf7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classproland_1_1TileCache.html#a4bbcc74b3a1a725cd5ecbb6125013cf7">proland::TileCache::name</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The name of this cache for debugging purpose. </p>

</div>
</div>
<a class="anchor" id="ab834771551d3571f9d718fa642881965"></a><!-- doxytag: member="proland::TileCache::nextProducerId" ref="ab834771551d3571f9d718fa642881965" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1TileCache.html#ab834771551d3571f9d718fa642881965">proland::TileCache::nextProducerId</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Next local identifier to be used for a <a class="el" href="classproland_1_1TileProducer.html" title="An abstract producer of tiles.">TileProducer</a> using this cache. </p>

</div>
</div>
<a class="anchor" id="ada1c7ea60a28ca94e65509e39a359dff"></a><!-- doxytag: member="proland::TileCache::producers" ref="ada1c7ea60a28ca94e65509e39a359dff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;int, <a class="el" href="classproland_1_1TileProducer.html">TileProducer</a>*&gt; <a class="el" href="classproland_1_1TileCache.html#ada1c7ea60a28ca94e65509e39a359dff">proland::TileCache::producers</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The producers that use this <a class="el" href="classproland_1_1TileCache.html" title="A cache of tiles to avoid recomputing recently produced tiles.">TileCache</a>. </p>
<p>Maps local producer identifiers to actual producers. </p>

</div>
</div>
<a class="anchor" id="a047bc8694303b10023f75daa79fac365"></a><!-- doxytag: member="proland::TileCache::queries" ref="a047bc8694303b10023f75daa79fac365" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classproland_1_1TileCache.html#a047bc8694303b10023f75daa79fac365">proland::TileCache::queries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of queries to this tile cache. </p>
<p>Only used for statistics. </p>

</div>
</div>
<a class="anchor" id="a9dee149080f33cf75ed4a421ec1f07f1"></a><!-- doxytag: member="proland::TileCache::scheduler" ref="a9dee149080f33cf75ed4a421ec1f07f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;Scheduler&gt; <a class="el" href="classproland_1_1TileCache.html#a9dee149080f33cf75ed4a421ec1f07f1">proland::TileCache::scheduler</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The scheduler to schedule prefetched tiles creation tasks, and to reschedule invalidated tiles creation tasks. </p>

</div>
</div>
<a class="anchor" id="a2a6356586c04b42471c658350deaf3a8"></a><!-- doxytag: member="proland::TileCache::storage" ref="a2a6356586c04b42471c658350deaf3a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptr&lt;<a class="el" href="classproland_1_1TileStorage.html">TileStorage</a>&gt; <a class="el" href="classproland_1_1TileCache.html#a2a6356586c04b42471c658350deaf3a8">proland::TileCache::storage</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The storage to store the tiles data. </p>

</div>
</div>
<a class="anchor" id="a54cdd39ce5d84c6431cc0fc04259e819"></a><!-- doxytag: member="proland::TileCache::unusedTiles" ref="a54cdd39ce5d84c6431cc0fc04259e819" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cache <a class="el" href="classproland_1_1TileCache.html#a54cdd39ce5d84c6431cc0fc04259e819">proland::TileCache::unusedTiles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The unused tiles. </p>
<p>These tiles can be evicted from the cache at any moment. Maps tile identifiers to positions in the ordered list of tiles <a class="el" href="classproland_1_1TileCache.html#a1820c6bf9e0cc8dabebcb9cfb0acf4ec" title="The unused tiles, ordered by date of last use (to implement a LRU cache).">unusedTilesOrder</a> (used to implement a LRU cache). </p>

</div>
</div>
<a class="anchor" id="a1820c6bf9e0cc8dabebcb9cfb0acf4ec"></a><!-- doxytag: member="proland::TileCache::unusedTilesOrder" ref="a1820c6bf9e0cc8dabebcb9cfb0acf4ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list&lt;<a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a>*&gt; <a class="el" href="classproland_1_1TileCache.html#a1820c6bf9e0cc8dabebcb9cfb0acf4ec">proland::TileCache::unusedTilesOrder</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The unused tiles, ordered by date of last use (to implement a LRU cache). </p>

</div>
</div>
<a class="anchor" id="a041aea3a69856b0783bbc8a816d2129a"></a><!-- doxytag: member="proland::TileCache::usedTiles" ref="a041aea3a69856b0783bbc8a816d2129a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt;<a class="el" href="classproland_1_1TileCache_1_1Tile.html#a5163c613efa3ea1ee0a64b82ea097ac3">Tile::TId</a>, <a class="el" href="classproland_1_1TileCache_1_1Tile.html">Tile</a>*&gt; <a class="el" href="classproland_1_1TileCache.html#a041aea3a69856b0783bbc8a816d2129a">proland::TileCache::usedTiles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The tiles currently in use. </p>
<p>These tiles cannot be evicted from the cache and from the <a class="el" href="classproland_1_1TileStorage.html" title="A shared storage to store tiles of the same kind.">TileStorage</a>, until they become unused. Maps tile identifiers to actual tiles. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sat May 12 09:41:38 2012 for proland by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
